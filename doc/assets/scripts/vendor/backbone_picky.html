<!DOCTYPE html><html lang="en"><head><title>assets/scripts/vendor/backbone_picky</title></head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0"><meta name="groc-relative-root" content="../../../"><meta name="groc-document-path" content="assets/scripts/vendor/backbone_picky"><meta name="groc-project-path" content="assets/scripts/vendor/backbone_picky.js"><link rel="stylesheet" type="text/css" media="all" href="../../../assets/style.css"><script type="text/javascript" src="../../../assets/behavior.js"></script><body><div id="meta"><div class="file-path">assets/scripts/vendor/backbone_picky.js</div></div><div id="document"><div class="segment"><div class="comments "><div class="wrapper"><p>Backbone.Picky, v0.2.0
Copyright (c)2013 Derick Bailey, Muted Solutions, LLC.
Distributed under MIT license
<a href="http://github.com/derickbailey/backbone.picky">http://github.com/derickbailey/backbone.picky</a></p></div></div><div class="code"><div class="wrapper">Backbone.Picky = (<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(Backbone, _)</span> {</span>
  <span class="hljs-keyword">var</span> Picky = {};</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><h2 id="pickysingleselect">Picky.SingleSelect</h2>
<p>A single-select mixin for Backbone.Collection, allowing a single
model to be selected within a collection. Selection of another
model within the collection causes the previous model to be
deselected.</p></div></div><div class="code"><div class="wrapper">  Picky.SingleSelect = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(collection)</span>{</span>
    <span class="hljs-keyword">this</span>.collection = collection;
  };

  _.extend(Picky.SingleSelect.prototype, {</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Select a model, deselecting any previously
selected model</p></div></div><div class="code"><div class="wrapper">    select: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(model)</span>{</span>
      <span class="hljs-keyword">if</span> (model &amp;&amp; <span class="hljs-keyword">this</span>.selected === model) { <span class="hljs-keyword">return</span>; }

      <span class="hljs-keyword">this</span>.deselect();

      <span class="hljs-keyword">this</span>.selected = model;
      <span class="hljs-keyword">this</span>.selected.select();
      <span class="hljs-keyword">this</span>.trigger(<span class="hljs-string">"select:one"</span>, model);
    },</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Deselect a model, resulting in no model
being selected</p></div></div><div class="code"><div class="wrapper">    deselect: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(model)</span>{</span>
      <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.selected){ <span class="hljs-keyword">return</span>; }

      model = model || <span class="hljs-keyword">this</span>.selected;
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.selected !== model){ <span class="hljs-keyword">return</span>; }

      <span class="hljs-keyword">this</span>.selected.deselect();
      <span class="hljs-keyword">this</span>.trigger(<span class="hljs-string">"deselect:one"</span>, <span class="hljs-keyword">this</span>.selected);
      <span class="hljs-keyword">delete</span> <span class="hljs-keyword">this</span>.selected;
    }

  });</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><h2 id="pickymultiselect">Picky.MultiSelect</h2>
<p>A mult-select mixin for Backbone.Collection, allowing a collection to
have multiple items selected, including <code>selectAll</code> and <code>selectNone</code>
capabilities.</p></div></div><div class="code"><div class="wrapper">  Picky.MultiSelect = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(collection)</span> {</span>
    <span class="hljs-keyword">this</span>.collection = collection;
    <span class="hljs-keyword">this</span>.selected = {};
  };

  _.extend(Picky.MultiSelect.prototype, {</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Select a specified model, make sure the
model knows it&#39;s selected, and hold on to
the selected model.</p></div></div><div class="code"><div class="wrapper">    select: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(model)</span> {</span>
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.selected[model.cid]) { <span class="hljs-keyword">return</span>; }

      <span class="hljs-keyword">this</span>.selected[model.cid] = model;
      model.select();
      calculateSelectedLength(<span class="hljs-keyword">this</span>);
    },</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Deselect a specified model, make sure the
model knows it has been deselected, and remove
the model from the selected list.</p></div></div><div class="code"><div class="wrapper">    deselect: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(model)</span> {</span>
      <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.selected[model.cid]) { <span class="hljs-keyword">return</span>; }

      <span class="hljs-keyword">delete</span> <span class="hljs-keyword">this</span>.selected[model.cid];
      model.deselect();
      calculateSelectedLength(<span class="hljs-keyword">this</span>);
    },</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Select all models in this collection</p></div></div><div class="code"><div class="wrapper">    selectAll: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
      <span class="hljs-keyword">this</span>.each(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(model)</span> {</span> model.select(); });
      calculateSelectedLength(<span class="hljs-keyword">this</span>);
    },</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Deselect all models in this collection</p></div></div><div class="code"><div class="wrapper">    selectNone: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.selectedLength === <span class="hljs-number">0</span>) { <span class="hljs-keyword">return</span>; }
      <span class="hljs-keyword">this</span>.each(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(model)</span> {</span> model.deselect(); });
      calculateSelectedLength(<span class="hljs-keyword">this</span>);
    },</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Toggle select all / none. If some are selected, it
will select all. If all are selected, it will select 
none. If none are selected, it will select all.</p></div></div><div class="code"><div class="wrapper">    toggleSelectAll: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.selectedLength === <span class="hljs-keyword">this</span>.length) {
        <span class="hljs-keyword">this</span>.selectNone();
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">this</span>.selectAll();
      }
    }
  });</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><h2 id="pickyselectable">Picky.Selectable</h2>
<p>A selectable mixin for Backbone.Model, allowing a model to be selected,
enabling it to work with Picky.MultiSelect or on it&#39;s own</p></div></div><div class="code"><div class="wrapper">  Picky.Selectable = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(model)</span> {</span>
    <span class="hljs-keyword">this</span>.model = model;
  };

  _.extend(Picky.Selectable.prototype, {</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Select this model, and tell our
collection that we&#39;re selected</p></div></div><div class="code"><div class="wrapper">    select: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.selected) { <span class="hljs-keyword">return</span>; }

      <span class="hljs-keyword">this</span>.selected = <span class="hljs-literal">true</span>;
      <span class="hljs-keyword">this</span>.trigger(<span class="hljs-string">"selected"</span>, <span class="hljs-keyword">this</span>);

      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.collection) {
        <span class="hljs-keyword">this</span>.collection.select(<span class="hljs-keyword">this</span>);
      }
    },</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Deselect this model, and tell our
collection that we&#39;re deselected</p></div></div><div class="code"><div class="wrapper">    deselect: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
      <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.selected) { <span class="hljs-keyword">return</span>; }

      <span class="hljs-keyword">this</span>.selected = <span class="hljs-literal">false</span>;
      <span class="hljs-keyword">this</span>.trigger(<span class="hljs-string">"deselected"</span>, <span class="hljs-keyword">this</span>);

      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.collection) {
        <span class="hljs-keyword">this</span>.collection.deselect(<span class="hljs-keyword">this</span>);
      }
    },</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Change selected to the opposite of what
it currently is</p></div></div><div class="code"><div class="wrapper">    toggleSelected: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.selected) {
        <span class="hljs-keyword">this</span>.deselect();
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">this</span>.select();
      }
    }
  });</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><h2 id="helper-methods">Helper Methods</h2></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Calculate the number of selected items in a collection
and update the collection with that length. Trigger events
from the collection based on the number of selected items.</p></div></div><div class="code"><div class="wrapper">  <span class="hljs-keyword">var</span> calculateSelectedLength = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(collection)</span> {</span>
    collection.selectedLength = _.size(collection.selected);

    <span class="hljs-keyword">var</span> selectedLength = collection.selectedLength;
    <span class="hljs-keyword">var</span> length = collection.length;

    <span class="hljs-keyword">if</span> (selectedLength === length) {
      collection.trigger(<span class="hljs-string">"select:all"</span>, collection);
      <span class="hljs-keyword">return</span>;
    }

    <span class="hljs-keyword">if</span> (selectedLength === <span class="hljs-number">0</span>) {
      collection.trigger(<span class="hljs-string">"select:none"</span>, collection);
      <span class="hljs-keyword">return</span>;
    }

    <span class="hljs-keyword">if</span> (selectedLength &gt; <span class="hljs-number">0</span> &amp;&amp; selectedLength &lt; length) {
      collection.trigger(<span class="hljs-string">"select:some"</span>, collection);
      <span class="hljs-keyword">return</span>;
    }
  };

  <span class="hljs-keyword">return</span> Picky;
})(Backbone, _);</div></div></div></div></body></html>