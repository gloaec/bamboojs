<!DOCTYPE html><html lang="en"><head><title>assets/scripts/vendor/morris</title></head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0"><meta name="groc-relative-root" content="../../../"><meta name="groc-document-path" content="assets/scripts/vendor/morris"><meta name="groc-project-path" content="assets/scripts/vendor/morris.js"><link rel="stylesheet" type="text/css" media="all" href="../../../assets/style.css"><script type="text/javascript" src="../../../assets/behavior.js"></script><body><div id="meta"><div class="file-path">assets/scripts/vendor/morris.js</div></div><div id="document"><div class="segment"><div class="code"><div class="wrapper">(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
  <span class="hljs-keyword">var</span> $, Morris, minutesSpecHelper, secondsSpecHelper,
    __slice = [].slice,
    __bind = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(fn, me)</span>{</span> <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span>{</span> <span class="hljs-keyword">return</span> fn.apply(me, <span class="hljs-built_in">arguments</span>); }; },
    __hasProp = {}.hasOwnProperty,
    __extends = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(child, parent)</span> {</span> <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> key <span class="hljs-keyword">in</span> parent) { <span class="hljs-keyword">if</span> (__hasProp.call(parent, key)) child[key] = parent[key]; } <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ctor</span><span class="hljs-params">()</span> {</span> <span class="hljs-keyword">this</span>.constructor = child; } ctor.prototype = parent.prototype; child.prototype = <span class="hljs-keyword">new</span> ctor(); child.__super__ = parent.prototype; <span class="hljs-keyword">return</span> child; },
    __indexOf = [].indexOf || <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(item)</span> {</span> <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>, l = <span class="hljs-keyword">this</span>.length; i &lt; l; i++) { <span class="hljs-keyword">if</span> (i <span class="hljs-keyword">in</span> <span class="hljs-keyword">this</span> &amp;&amp; <span class="hljs-keyword">this</span>[i] === item) <span class="hljs-keyword">return</span> i; } <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span>; };

  Morris = window.Morris = {};

  $ = jQuery;

  Morris.EventEmitter = (<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">EventEmitter</span><span class="hljs-params">()</span> {</span>}

    EventEmitter.prototype.on = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(name, handler)</span> {</span>
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.handlers == <span class="hljs-literal">null</span>) {
        <span class="hljs-keyword">this</span>.handlers = {};
      }
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.handlers[name] == <span class="hljs-literal">null</span>) {
        <span class="hljs-keyword">this</span>.handlers[name] = [];
      }
      <span class="hljs-keyword">this</span>.handlers[name].push(handler);
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
    };

    EventEmitter.prototype.fire = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
      <span class="hljs-keyword">var</span> args, handler, name, _i, _len, _ref, _results;
      name = <span class="hljs-built_in">arguments</span>[<span class="hljs-number">0</span>], args = <span class="hljs-number">2</span> &lt;= <span class="hljs-built_in">arguments</span>.length ? __slice.call(<span class="hljs-built_in">arguments</span>, <span class="hljs-number">1</span>) : [];
      <span class="hljs-keyword">if</span> ((<span class="hljs-keyword">this</span>.handlers != <span class="hljs-literal">null</span>) &amp;&amp; (<span class="hljs-keyword">this</span>.handlers[name] != <span class="hljs-literal">null</span>)) {
        _ref = <span class="hljs-keyword">this</span>.handlers[name];
        _results = [];
        <span class="hljs-keyword">for</span> (_i = <span class="hljs-number">0</span>, _len = _ref.length; _i &lt; _len; _i++) {
          handler = _ref[_i];
          _results.push(handler.apply(<span class="hljs-literal">null</span>, args));
        }
        <span class="hljs-keyword">return</span> _results;
      }
    };

    <span class="hljs-keyword">return</span> EventEmitter;

  })();

  Morris.commas = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(num)</span> {</span>
    <span class="hljs-keyword">var</span> absnum, intnum, ret, strabsnum;
    <span class="hljs-keyword">if</span> (num != <span class="hljs-literal">null</span>) {
      ret = num &lt; <span class="hljs-number">0</span> ? <span class="hljs-string">"-"</span> : <span class="hljs-string">""</span>;
      absnum = <span class="hljs-built_in">Math</span>.abs(num);
      intnum = <span class="hljs-built_in">Math</span>.floor(absnum).toFixed(<span class="hljs-number">0</span>);
      ret += intnum.replace(<span class="hljs-regexp">/(?=(?:\d{3})+$)(?!^)/g</span>, <span class="hljs-string">','</span>);
      strabsnum = absnum.toString();
      <span class="hljs-keyword">if</span> (strabsnum.length &gt; intnum.length) {
        ret += strabsnum.slice(intnum.length);
      }
      <span class="hljs-keyword">return</span> ret;
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">return</span> <span class="hljs-string">'-'</span>;
    }
  };

  Morris.pad2 = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(number)</span> {</span>
    <span class="hljs-keyword">return</span> (number &lt; <span class="hljs-number">10</span> ? <span class="hljs-string">'0'</span> : <span class="hljs-string">''</span>) + number;
  };

  Morris.Grid = (<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(_super)</span> {</span>
    __extends(Grid, _super);

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Grid</span><span class="hljs-params">(options)</span> {</span>
      <span class="hljs-keyword">this</span>.resizeHandler = __bind(<span class="hljs-keyword">this</span>.resizeHandler, <span class="hljs-keyword">this</span>);
      <span class="hljs-keyword">var</span> _this = <span class="hljs-keyword">this</span>;
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> options.element === <span class="hljs-string">'string'</span>) {
        <span class="hljs-keyword">this</span>.el = $(document.getElementById(options.element));
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">this</span>.el = $(options.element);
      }
      <span class="hljs-keyword">if</span> ((<span class="hljs-keyword">this</span>.el == <span class="hljs-literal">null</span>) || <span class="hljs-keyword">this</span>.el.length === <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">"Graph container element not found"</span>);
      }
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.el.css(<span class="hljs-string">'position'</span>) === <span class="hljs-string">'static'</span>) {
        <span class="hljs-keyword">this</span>.el.css(<span class="hljs-string">'position'</span>, <span class="hljs-string">'relative'</span>);
      }
      <span class="hljs-keyword">this</span>.options = $.extend({}, <span class="hljs-keyword">this</span>.gridDefaults, <span class="hljs-keyword">this</span>.defaults || {}, options);
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-keyword">this</span>.options.units === <span class="hljs-string">'string'</span>) {
        <span class="hljs-keyword">this</span>.options.postUnits = options.units;
      }
      <span class="hljs-keyword">this</span>.raphael = <span class="hljs-keyword">new</span> Raphael(<span class="hljs-keyword">this</span>.el[<span class="hljs-number">0</span>]);
      <span class="hljs-keyword">this</span>.elementWidth = <span class="hljs-literal">null</span>;
      <span class="hljs-keyword">this</span>.elementHeight = <span class="hljs-literal">null</span>;
      <span class="hljs-keyword">this</span>.dirty = <span class="hljs-literal">false</span>;
      <span class="hljs-keyword">this</span>.selectFrom = <span class="hljs-literal">null</span>;
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.init) {
        <span class="hljs-keyword">this</span>.init();
      }
      <span class="hljs-keyword">this</span>.setData(<span class="hljs-keyword">this</span>.options.data);
      <span class="hljs-keyword">this</span>.el.bind(<span class="hljs-string">'mousemove'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(evt)</span> {</span>
        <span class="hljs-keyword">var</span> left, offset, right, width, x;
        offset = _this.el.offset();
        x = evt.pageX - offset.left;
        <span class="hljs-keyword">if</span> (_this.selectFrom) {
          left = _this.data[_this.hitTest(<span class="hljs-built_in">Math</span>.min(x, _this.selectFrom))]._x;
          right = _this.data[_this.hitTest(<span class="hljs-built_in">Math</span>.max(x, _this.selectFrom))]._x;
          width = right - left;
          <span class="hljs-keyword">return</span> _this.selectionRect.attr({
            x: left,
            width: width
          });
        } <span class="hljs-keyword">else</span> {
          <span class="hljs-keyword">return</span> _this.fire(<span class="hljs-string">'hovermove'</span>, x, evt.pageY - offset.top);
        }
      });
      <span class="hljs-keyword">this</span>.el.bind(<span class="hljs-string">'mouseleave'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(evt)</span> {</span>
        <span class="hljs-keyword">if</span> (_this.selectFrom) {
          _this.selectionRect.hide();
          _this.selectFrom = <span class="hljs-literal">null</span>;
        }
        <span class="hljs-keyword">return</span> _this.fire(<span class="hljs-string">'hoverout'</span>);
      });
      <span class="hljs-keyword">this</span>.el.bind(<span class="hljs-string">'touchstart touchmove touchend'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(evt)</span> {</span>
        <span class="hljs-keyword">var</span> offset, touch;
        touch = evt.originalEvent.touches[<span class="hljs-number">0</span>] || evt.originalEvent.changedTouches[<span class="hljs-number">0</span>];
        offset = _this.el.offset();
        _this.fire(<span class="hljs-string">'hover'</span>, touch.pageX - offset.left, touch.pageY - offset.top);
        <span class="hljs-keyword">return</span> touch;
      });
      <span class="hljs-keyword">this</span>.el.bind(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(evt)</span> {</span>
        <span class="hljs-keyword">var</span> offset;
        offset = _this.el.offset();
        <span class="hljs-keyword">return</span> _this.fire(<span class="hljs-string">'gridclick'</span>, evt.pageX - offset.left, evt.pageY - offset.top);
      });
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.options.rangeSelect) {
        <span class="hljs-keyword">this</span>.selectionRect = <span class="hljs-keyword">this</span>.raphael.rect(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-keyword">this</span>.el.innerHeight()).attr({
          fill: <span class="hljs-keyword">this</span>.options.rangeSelectColor,
          stroke: <span class="hljs-literal">false</span>
        }).toBack().hide();
        <span class="hljs-keyword">this</span>.el.bind(<span class="hljs-string">'mousedown'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(evt)</span> {</span>
          <span class="hljs-keyword">var</span> offset;
          offset = _this.el.offset();
          <span class="hljs-keyword">return</span> _this.startRange(evt.pageX - offset.left);
        });
        <span class="hljs-keyword">this</span>.el.bind(<span class="hljs-string">'mouseup'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(evt)</span> {</span>
          <span class="hljs-keyword">var</span> offset;
          offset = _this.el.offset();
          _this.endRange(evt.pageX - offset.left);
          <span class="hljs-keyword">return</span> _this.fire(<span class="hljs-string">'hovermove'</span>, evt.pageX - offset.left, evt.pageY - offset.top);
        });
      }
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.options.resize) {
        $(window).bind(<span class="hljs-string">'resize'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(evt)</span> {</span>
          <span class="hljs-keyword">if</span> (_this.timeoutId != <span class="hljs-literal">null</span>) {
            window.clearTimeout(_this.timeoutId);
          }
          <span class="hljs-keyword">return</span> _this.timeoutId = window.setTimeout(_this.resizeHandler, <span class="hljs-number">100</span>);
        });
      }
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.postInit) {
        <span class="hljs-keyword">this</span>.postInit();
      }
    }

    Grid.prototype.gridDefaults = {
      dateFormat: <span class="hljs-literal">null</span>,
      axes: <span class="hljs-literal">true</span>,
      grid: <span class="hljs-literal">true</span>,
      gridLineColor: <span class="hljs-string">'#aaa'</span>,
      gridStrokeWidth: <span class="hljs-number">0.5</span>,
      gridTextColor: <span class="hljs-string">'#888'</span>,
      gridTextSize: <span class="hljs-number">12</span>,
      gridTextFamily: <span class="hljs-string">'sans-serif'</span>,
      gridTextWeight: <span class="hljs-string">'normal'</span>,
      hideHover: <span class="hljs-literal">false</span>,
      yLabelFormat: <span class="hljs-literal">null</span>,
      xLabelAngle: <span class="hljs-number">0</span>,
      numLines: <span class="hljs-number">5</span>,
      padding: <span class="hljs-number">25</span>,
      parseTime: <span class="hljs-literal">true</span>,
      postUnits: <span class="hljs-string">''</span>,
      preUnits: <span class="hljs-string">''</span>,
      ymax: <span class="hljs-string">'auto'</span>,
      ymin: <span class="hljs-string">'auto 0'</span>,
      goals: [],
      goalStrokeWidth: <span class="hljs-number">1.0</span>,
      goalLineColors: [<span class="hljs-string">'#666633'</span>, <span class="hljs-string">'#999966'</span>, <span class="hljs-string">'#cc6666'</span>, <span class="hljs-string">'#663333'</span>],
      events: [],
      eventStrokeWidth: <span class="hljs-number">1.0</span>,
      eventLineColors: [<span class="hljs-string">'#005a04'</span>, <span class="hljs-string">'#ccffbb'</span>, <span class="hljs-string">'#3a5f0b'</span>, <span class="hljs-string">'#005502'</span>],
      rangeSelect: <span class="hljs-literal">null</span>,
      rangeSelectColor: <span class="hljs-string">'#eef'</span>,
      resize: <span class="hljs-literal">false</span>
    };

    Grid.prototype.setData = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(data, redraw)</span> {</span>
      <span class="hljs-keyword">var</span> e, idx, index, maxGoal, minGoal, ret, row, step, total, y, ykey, ymax, ymin, yval, _ref;
      <span class="hljs-keyword">if</span> (redraw == <span class="hljs-literal">null</span>) {
        redraw = <span class="hljs-literal">true</span>;
      }
      <span class="hljs-keyword">this</span>.options.data = data;
      <span class="hljs-keyword">if</span> ((data == <span class="hljs-literal">null</span>) || data.length === <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">this</span>.data = [];
        <span class="hljs-keyword">this</span>.raphael.clear();
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.hover != <span class="hljs-literal">null</span>) {
          <span class="hljs-keyword">this</span>.hover.hide();
        }
        <span class="hljs-keyword">return</span>;
      }
      ymax = <span class="hljs-keyword">this</span>.cumulative ? <span class="hljs-number">0</span> : <span class="hljs-literal">null</span>;
      ymin = <span class="hljs-keyword">this</span>.cumulative ? <span class="hljs-number">0</span> : <span class="hljs-literal">null</span>;
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.options.goals.length &gt; <span class="hljs-number">0</span>) {
        minGoal = <span class="hljs-built_in">Math</span>.min.apply(<span class="hljs-built_in">Math</span>, <span class="hljs-keyword">this</span>.options.goals);
        maxGoal = <span class="hljs-built_in">Math</span>.max.apply(<span class="hljs-built_in">Math</span>, <span class="hljs-keyword">this</span>.options.goals);
        ymin = ymin != <span class="hljs-literal">null</span> ? <span class="hljs-built_in">Math</span>.min(ymin, minGoal) : minGoal;
        ymax = ymax != <span class="hljs-literal">null</span> ? <span class="hljs-built_in">Math</span>.max(ymax, maxGoal) : maxGoal;
      }
      <span class="hljs-keyword">this</span>.data = (<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
        <span class="hljs-keyword">var</span> _i, _len, _results;
        _results = [];
        <span class="hljs-keyword">for</span> (index = _i = <span class="hljs-number">0</span>, _len = data.length; _i &lt; _len; index = ++_i) {
          row = data[index];
          ret = {
            src: row
          };
          ret.label = row[<span class="hljs-keyword">this</span>.options.xkey];
          <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.options.parseTime) {
            ret.x = Morris.parseDate(ret.label);
            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.options.dateFormat) {
              ret.label = <span class="hljs-keyword">this</span>.options.dateFormat(ret.x);
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> ret.label === <span class="hljs-string">'number'</span>) {
              ret.label = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(ret.label).toString();
            }
          } <span class="hljs-keyword">else</span> {
            ret.x = index;
            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.options.xLabelFormat) {
              ret.label = <span class="hljs-keyword">this</span>.options.xLabelFormat(ret);
            }
          }
          total = <span class="hljs-number">0</span>;
          ret.y = (<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
            <span class="hljs-keyword">var</span> _j, _len1, _ref, _results1;
            _ref = <span class="hljs-keyword">this</span>.options.ykeys;
            _results1 = [];
            <span class="hljs-keyword">for</span> (idx = _j = <span class="hljs-number">0</span>, _len1 = _ref.length; _j &lt; _len1; idx = ++_j) {
              ykey = _ref[idx];
              yval = row[ykey];
              <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> yval === <span class="hljs-string">'string'</span>) {
                yval = <span class="hljs-built_in">parseFloat</span>(yval);
              }
              <span class="hljs-keyword">if</span> ((yval != <span class="hljs-literal">null</span>) &amp;&amp; <span class="hljs-keyword">typeof</span> yval !== <span class="hljs-string">'number'</span>) {
                yval = <span class="hljs-literal">null</span>;
              }
              <span class="hljs-keyword">if</span> (yval != <span class="hljs-literal">null</span>) {
                <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.cumulative) {
                  total += yval;
                } <span class="hljs-keyword">else</span> {
                  <span class="hljs-keyword">if</span> (ymax != <span class="hljs-literal">null</span>) {
                    ymax = <span class="hljs-built_in">Math</span>.max(yval, ymax);
                    ymin = <span class="hljs-built_in">Math</span>.min(yval, ymin);
                  } <span class="hljs-keyword">else</span> {
                    ymax = ymin = yval;
                  }
                }
              }
              <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.cumulative &amp;&amp; (total != <span class="hljs-literal">null</span>)) {
                ymax = <span class="hljs-built_in">Math</span>.max(total, ymax);
                ymin = <span class="hljs-built_in">Math</span>.min(total, ymin);
              }
              _results1.push(yval);
            }
            <span class="hljs-keyword">return</span> _results1;
          }).call(<span class="hljs-keyword">this</span>);
          _results.push(ret);
        }
        <span class="hljs-keyword">return</span> _results;
      }).call(<span class="hljs-keyword">this</span>);
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.options.parseTime) {
        <span class="hljs-keyword">this</span>.data = <span class="hljs-keyword">this</span>.data.sort(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(a, b)</span> {</span>
          <span class="hljs-keyword">return</span> (a.x &gt; b.x) - (b.x &gt; a.x);
        });
      }
      <span class="hljs-keyword">this</span>.xmin = <span class="hljs-keyword">this</span>.data[<span class="hljs-number">0</span>].x;
      <span class="hljs-keyword">this</span>.xmax = <span class="hljs-keyword">this</span>.data[<span class="hljs-keyword">this</span>.data.length - <span class="hljs-number">1</span>].x;
      <span class="hljs-keyword">this</span>.events = [];
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.options.events.length &gt; <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.options.parseTime) {
          <span class="hljs-keyword">this</span>.events = (<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
            <span class="hljs-keyword">var</span> _i, _len, _ref, _results;
            _ref = <span class="hljs-keyword">this</span>.options.events;
            _results = [];
            <span class="hljs-keyword">for</span> (_i = <span class="hljs-number">0</span>, _len = _ref.length; _i &lt; _len; _i++) {
              e = _ref[_i];
              _results.push(Morris.parseDate(e));
            }
            <span class="hljs-keyword">return</span> _results;
          }).call(<span class="hljs-keyword">this</span>);
        } <span class="hljs-keyword">else</span> {
          <span class="hljs-keyword">this</span>.events = <span class="hljs-keyword">this</span>.options.events;
        }
        <span class="hljs-keyword">this</span>.xmax = <span class="hljs-built_in">Math</span>.max(<span class="hljs-keyword">this</span>.xmax, <span class="hljs-built_in">Math</span>.max.apply(<span class="hljs-built_in">Math</span>, <span class="hljs-keyword">this</span>.events));
        <span class="hljs-keyword">this</span>.xmin = <span class="hljs-built_in">Math</span>.min(<span class="hljs-keyword">this</span>.xmin, <span class="hljs-built_in">Math</span>.min.apply(<span class="hljs-built_in">Math</span>, <span class="hljs-keyword">this</span>.events));
      }
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.xmin === <span class="hljs-keyword">this</span>.xmax) {
        <span class="hljs-keyword">this</span>.xmin -= <span class="hljs-number">1</span>;
        <span class="hljs-keyword">this</span>.xmax += <span class="hljs-number">1</span>;
      }
      <span class="hljs-keyword">this</span>.ymin = <span class="hljs-keyword">this</span>.yboundary(<span class="hljs-string">'min'</span>, ymin);
      <span class="hljs-keyword">this</span>.ymax = <span class="hljs-keyword">this</span>.yboundary(<span class="hljs-string">'max'</span>, ymax);
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.ymin === <span class="hljs-keyword">this</span>.ymax) {
        <span class="hljs-keyword">if</span> (ymin) {
          <span class="hljs-keyword">this</span>.ymin -= <span class="hljs-number">1</span>;
        }
        <span class="hljs-keyword">this</span>.ymax += <span class="hljs-number">1</span>;
      }
      <span class="hljs-keyword">if</span> (((_ref = <span class="hljs-keyword">this</span>.options.axes) === <span class="hljs-literal">true</span> || _ref === <span class="hljs-string">'both'</span> || _ref === <span class="hljs-string">'y'</span>) || <span class="hljs-keyword">this</span>.options.grid === <span class="hljs-literal">true</span>) {
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.options.ymax === <span class="hljs-keyword">this</span>.gridDefaults.ymax &amp;&amp; <span class="hljs-keyword">this</span>.options.ymin === <span class="hljs-keyword">this</span>.gridDefaults.ymin) {
          <span class="hljs-keyword">this</span>.grid = <span class="hljs-keyword">this</span>.autoGridLines(<span class="hljs-keyword">this</span>.ymin, <span class="hljs-keyword">this</span>.ymax, <span class="hljs-keyword">this</span>.options.numLines);
          <span class="hljs-keyword">this</span>.ymin = <span class="hljs-built_in">Math</span>.min(<span class="hljs-keyword">this</span>.ymin, <span class="hljs-keyword">this</span>.grid[<span class="hljs-number">0</span>]);
          <span class="hljs-keyword">this</span>.ymax = <span class="hljs-built_in">Math</span>.max(<span class="hljs-keyword">this</span>.ymax, <span class="hljs-keyword">this</span>.grid[<span class="hljs-keyword">this</span>.grid.length - <span class="hljs-number">1</span>]);
        } <span class="hljs-keyword">else</span> {
          step = (<span class="hljs-keyword">this</span>.ymax - <span class="hljs-keyword">this</span>.ymin) / (<span class="hljs-keyword">this</span>.options.numLines - <span class="hljs-number">1</span>);
          <span class="hljs-keyword">this</span>.grid = (<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
            <span class="hljs-keyword">var</span> _i, _ref1, _ref2, _results;
            _results = [];
            <span class="hljs-keyword">for</span> (y = _i = _ref1 = <span class="hljs-keyword">this</span>.ymin, _ref2 = <span class="hljs-keyword">this</span>.ymax; step &gt; <span class="hljs-number">0</span> ? _i &lt;= _ref2 : _i &gt;= _ref2; y = _i += step) {
              _results.push(y);
            }
            <span class="hljs-keyword">return</span> _results;
          }).call(<span class="hljs-keyword">this</span>);
        }
      }
      <span class="hljs-keyword">this</span>.dirty = <span class="hljs-literal">true</span>;
      <span class="hljs-keyword">if</span> (redraw) {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.redraw();
      }
    };

    Grid.prototype.yboundary = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(boundaryType, currentValue)</span> {</span>
      <span class="hljs-keyword">var</span> boundaryOption, suggestedValue;
      boundaryOption = <span class="hljs-keyword">this</span>.options[<span class="hljs-string">"y"</span> + boundaryType];
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> boundaryOption === <span class="hljs-string">'string'</span>) {
        <span class="hljs-keyword">if</span> (boundaryOption.slice(<span class="hljs-number">0</span>, <span class="hljs-number">4</span>) === <span class="hljs-string">'auto'</span>) {
          <span class="hljs-keyword">if</span> (boundaryOption.length &gt; <span class="hljs-number">5</span>) {
            suggestedValue = <span class="hljs-built_in">parseInt</span>(boundaryOption.slice(<span class="hljs-number">5</span>), <span class="hljs-number">10</span>);
            <span class="hljs-keyword">if</span> (currentValue == <span class="hljs-literal">null</span>) {
              <span class="hljs-keyword">return</span> suggestedValue;
            }
            <span class="hljs-keyword">return</span> <span class="hljs-built_in">Math</span>[boundaryType](currentValue, suggestedValue);
          } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">if</span> (currentValue != <span class="hljs-literal">null</span>) {
              <span class="hljs-keyword">return</span> currentValue;
            } <span class="hljs-keyword">else</span> {
              <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
            }
          }
        } <span class="hljs-keyword">else</span> {
          <span class="hljs-keyword">return</span> <span class="hljs-built_in">parseInt</span>(boundaryOption, <span class="hljs-number">10</span>);
        }
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">return</span> boundaryOption;
      }
    };

    Grid.prototype.autoGridLines = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(ymin, ymax, nlines)</span> {</span>
      <span class="hljs-keyword">var</span> gmax, gmin, grid, smag, span, step, unit, y, ymag;
      span = ymax - ymin;
      ymag = <span class="hljs-built_in">Math</span>.floor(<span class="hljs-built_in">Math</span>.log(span) / <span class="hljs-built_in">Math</span>.log(<span class="hljs-number">10</span>));
      unit = <span class="hljs-built_in">Math</span>.pow(<span class="hljs-number">10</span>, ymag);
      gmin = <span class="hljs-built_in">Math</span>.floor(ymin / unit) * unit;
      gmax = <span class="hljs-built_in">Math</span>.ceil(ymax / unit) * unit;
      step = (gmax - gmin) / (nlines - <span class="hljs-number">1</span>);
      <span class="hljs-keyword">if</span> (unit === <span class="hljs-number">1</span> &amp;&amp; step &gt; <span class="hljs-number">1</span> &amp;&amp; <span class="hljs-built_in">Math</span>.ceil(step) !== step) {
        step = <span class="hljs-built_in">Math</span>.ceil(step);
        gmax = gmin + step * (nlines - <span class="hljs-number">1</span>);
      }
      <span class="hljs-keyword">if</span> (gmin &lt; <span class="hljs-number">0</span> &amp;&amp; gmax &gt; <span class="hljs-number">0</span>) {
        gmin = <span class="hljs-built_in">Math</span>.floor(ymin / step) * step;
        gmax = <span class="hljs-built_in">Math</span>.ceil(ymax / step) * step;
      }
      <span class="hljs-keyword">if</span> (step &lt; <span class="hljs-number">1</span>) {
        smag = <span class="hljs-built_in">Math</span>.floor(<span class="hljs-built_in">Math</span>.log(step) / <span class="hljs-built_in">Math</span>.log(<span class="hljs-number">10</span>));
        grid = (<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
          <span class="hljs-keyword">var</span> _i, _results;
          _results = [];
          <span class="hljs-keyword">for</span> (y = _i = gmin; step &gt; <span class="hljs-number">0</span> ? _i &lt;= gmax : _i &gt;= gmax; y = _i += step) {
            _results.push(<span class="hljs-built_in">parseFloat</span>(y.toFixed(<span class="hljs-number">1</span> - smag)));
          }
          <span class="hljs-keyword">return</span> _results;
        })();
      } <span class="hljs-keyword">else</span> {
        grid = (<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
          <span class="hljs-keyword">var</span> _i, _results;
          _results = [];
          <span class="hljs-keyword">for</span> (y = _i = gmin; step &gt; <span class="hljs-number">0</span> ? _i &lt;= gmax : _i &gt;= gmax; y = _i += step) {
            _results.push(y);
          }
          <span class="hljs-keyword">return</span> _results;
        })();
      }
      <span class="hljs-keyword">return</span> grid;
    };

    Grid.prototype._calc = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
      <span class="hljs-keyword">var</span> bottomOffsets, gridLine, h, i, w, yLabelWidths, _ref, _ref1;
      w = <span class="hljs-keyword">this</span>.el.width();
      h = <span class="hljs-keyword">this</span>.el.height();
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.elementWidth !== w || <span class="hljs-keyword">this</span>.elementHeight !== h || <span class="hljs-keyword">this</span>.dirty) {
        <span class="hljs-keyword">this</span>.elementWidth = w;
        <span class="hljs-keyword">this</span>.elementHeight = h;
        <span class="hljs-keyword">this</span>.dirty = <span class="hljs-literal">false</span>;
        <span class="hljs-keyword">this</span>.left = <span class="hljs-keyword">this</span>.options.padding;
        <span class="hljs-keyword">this</span>.right = <span class="hljs-keyword">this</span>.elementWidth - <span class="hljs-keyword">this</span>.options.padding;
        <span class="hljs-keyword">this</span>.top = <span class="hljs-keyword">this</span>.options.padding;
        <span class="hljs-keyword">this</span>.bottom = <span class="hljs-keyword">this</span>.elementHeight - <span class="hljs-keyword">this</span>.options.padding;
        <span class="hljs-keyword">if</span> ((_ref = <span class="hljs-keyword">this</span>.options.axes) === <span class="hljs-literal">true</span> || _ref === <span class="hljs-string">'both'</span> || _ref === <span class="hljs-string">'y'</span>) {
          yLabelWidths = (<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
            <span class="hljs-keyword">var</span> _i, _len, _ref1, _results;
            _ref1 = <span class="hljs-keyword">this</span>.grid;
            _results = [];
            <span class="hljs-keyword">for</span> (_i = <span class="hljs-number">0</span>, _len = _ref1.length; _i &lt; _len; _i++) {
              gridLine = _ref1[_i];
              _results.push(<span class="hljs-keyword">this</span>.measureText(<span class="hljs-keyword">this</span>.yAxisFormat(gridLine)).width);
            }
            <span class="hljs-keyword">return</span> _results;
          }).call(<span class="hljs-keyword">this</span>);
          <span class="hljs-keyword">this</span>.left += <span class="hljs-built_in">Math</span>.max.apply(<span class="hljs-built_in">Math</span>, yLabelWidths);
        }
        <span class="hljs-keyword">if</span> ((_ref1 = <span class="hljs-keyword">this</span>.options.axes) === <span class="hljs-literal">true</span> || _ref1 === <span class="hljs-string">'both'</span> || _ref1 === <span class="hljs-string">'x'</span>) {
          bottomOffsets = (<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
            <span class="hljs-keyword">var</span> _i, _ref2, _results;
            _results = [];
            <span class="hljs-keyword">for</span> (i = _i = <span class="hljs-number">0</span>, _ref2 = <span class="hljs-keyword">this</span>.data.length; <span class="hljs-number">0</span> &lt;= _ref2 ? _i &lt; _ref2 : _i &gt; _ref2; i = <span class="hljs-number">0</span> &lt;= _ref2 ? ++_i : --_i) {
              _results.push(<span class="hljs-keyword">this</span>.measureText(<span class="hljs-keyword">this</span>.data[i].text, -<span class="hljs-keyword">this</span>.options.xLabelAngle).height);
            }
            <span class="hljs-keyword">return</span> _results;
          }).call(<span class="hljs-keyword">this</span>);
          <span class="hljs-keyword">this</span>.bottom -= <span class="hljs-built_in">Math</span>.max.apply(<span class="hljs-built_in">Math</span>, bottomOffsets);
        }
        <span class="hljs-keyword">this</span>.width = <span class="hljs-built_in">Math</span>.max(<span class="hljs-number">1</span>, <span class="hljs-keyword">this</span>.right - <span class="hljs-keyword">this</span>.left);
        <span class="hljs-keyword">this</span>.height = <span class="hljs-built_in">Math</span>.max(<span class="hljs-number">1</span>, <span class="hljs-keyword">this</span>.bottom - <span class="hljs-keyword">this</span>.top);
        <span class="hljs-keyword">this</span>.dx = <span class="hljs-keyword">this</span>.width / (<span class="hljs-keyword">this</span>.xmax - <span class="hljs-keyword">this</span>.xmin);
        <span class="hljs-keyword">this</span>.dy = <span class="hljs-keyword">this</span>.height / (<span class="hljs-keyword">this</span>.ymax - <span class="hljs-keyword">this</span>.ymin);
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.calc) {
          <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.calc();
        }
      }
    };

    Grid.prototype.transY = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(y)</span> {</span>
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.bottom - (y - <span class="hljs-keyword">this</span>.ymin) * <span class="hljs-keyword">this</span>.dy;
    };

    Grid.prototype.transX = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(x)</span> {</span>
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.data.length === <span class="hljs-number">1</span>) {
        <span class="hljs-keyword">return</span> (<span class="hljs-keyword">this</span>.left + <span class="hljs-keyword">this</span>.right) / <span class="hljs-number">2</span>;
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.left + (x - <span class="hljs-keyword">this</span>.xmin) * <span class="hljs-keyword">this</span>.dx;
      }
    };

    Grid.prototype.redraw = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
      <span class="hljs-keyword">this</span>.raphael.clear();
      <span class="hljs-keyword">this</span>._calc();
      <span class="hljs-keyword">this</span>.drawGrid();
      <span class="hljs-keyword">this</span>.drawGoals();
      <span class="hljs-keyword">this</span>.drawEvents();
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.draw) {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.draw();
      }
    };

    Grid.prototype.measureText = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(text, angle)</span> {</span>
      <span class="hljs-keyword">var</span> ret, tt;
      <span class="hljs-keyword">if</span> (angle == <span class="hljs-literal">null</span>) {
        angle = <span class="hljs-number">0</span>;
      }
      tt = <span class="hljs-keyword">this</span>.raphael.text(<span class="hljs-number">100</span>, <span class="hljs-number">100</span>, text).attr(<span class="hljs-string">'font-size'</span>, <span class="hljs-keyword">this</span>.options.gridTextSize).attr(<span class="hljs-string">'font-family'</span>, <span class="hljs-keyword">this</span>.options.gridTextFamily).attr(<span class="hljs-string">'font-weight'</span>, <span class="hljs-keyword">this</span>.options.gridTextWeight).rotate(angle);
      ret = tt.getBBox();
      tt.remove();
      <span class="hljs-keyword">return</span> ret;
    };

    Grid.prototype.yAxisFormat = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(label)</span> {</span>
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.yLabelFormat(label);
    };

    Grid.prototype.yLabelFormat = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(label)</span> {</span>
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-keyword">this</span>.options.yLabelFormat === <span class="hljs-string">'function'</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.options.yLabelFormat(label);
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-string">""</span> + <span class="hljs-keyword">this</span>.options.preUnits + (Morris.commas(label)) + <span class="hljs-keyword">this</span>.options.postUnits;
      }
    };

    Grid.prototype.drawGrid = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
      <span class="hljs-keyword">var</span> lineY, y, _i, _len, _ref, _ref1, _ref2, _results;
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.options.grid === <span class="hljs-literal">false</span> &amp;&amp; ((_ref = <span class="hljs-keyword">this</span>.options.axes) !== <span class="hljs-literal">true</span> &amp;&amp; _ref !== <span class="hljs-string">'both'</span> &amp;&amp; _ref !== <span class="hljs-string">'y'</span>)) {
        <span class="hljs-keyword">return</span>;
      }
      _ref1 = <span class="hljs-keyword">this</span>.grid;
      _results = [];
      <span class="hljs-keyword">for</span> (_i = <span class="hljs-number">0</span>, _len = _ref1.length; _i &lt; _len; _i++) {
        lineY = _ref1[_i];
        y = <span class="hljs-keyword">this</span>.transY(lineY);
        <span class="hljs-keyword">if</span> ((_ref2 = <span class="hljs-keyword">this</span>.options.axes) === <span class="hljs-literal">true</span> || _ref2 === <span class="hljs-string">'both'</span> || _ref2 === <span class="hljs-string">'y'</span>) {
          <span class="hljs-keyword">this</span>.drawYAxisLabel(<span class="hljs-keyword">this</span>.left - <span class="hljs-keyword">this</span>.options.padding / <span class="hljs-number">2</span>, y, <span class="hljs-keyword">this</span>.yAxisFormat(lineY));
        }
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.options.grid) {
          _results.push(<span class="hljs-keyword">this</span>.drawGridLine(<span class="hljs-string">"M"</span> + <span class="hljs-keyword">this</span>.left + <span class="hljs-string">","</span> + y + <span class="hljs-string">"H"</span> + (<span class="hljs-keyword">this</span>.left + <span class="hljs-keyword">this</span>.width)));
        } <span class="hljs-keyword">else</span> {
          _results.push(<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>);
        }
      }
      <span class="hljs-keyword">return</span> _results;
    };

    Grid.prototype.drawGoals = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
      <span class="hljs-keyword">var</span> color, goal, i, _i, _len, _ref, _results;
      _ref = <span class="hljs-keyword">this</span>.options.goals;
      _results = [];
      <span class="hljs-keyword">for</span> (i = _i = <span class="hljs-number">0</span>, _len = _ref.length; _i &lt; _len; i = ++_i) {
        goal = _ref[i];
        color = <span class="hljs-keyword">this</span>.options.goalLineColors[i % <span class="hljs-keyword">this</span>.options.goalLineColors.length];
        _results.push(<span class="hljs-keyword">this</span>.drawGoal(goal, color));
      }
      <span class="hljs-keyword">return</span> _results;
    };

    Grid.prototype.drawEvents = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
      <span class="hljs-keyword">var</span> color, event, i, _i, _len, _ref, _results;
      _ref = <span class="hljs-keyword">this</span>.events;
      _results = [];
      <span class="hljs-keyword">for</span> (i = _i = <span class="hljs-number">0</span>, _len = _ref.length; _i &lt; _len; i = ++_i) {
        event = _ref[i];
        color = <span class="hljs-keyword">this</span>.options.eventLineColors[i % <span class="hljs-keyword">this</span>.options.eventLineColors.length];
        _results.push(<span class="hljs-keyword">this</span>.drawEvent(event, color));
      }
      <span class="hljs-keyword">return</span> _results;
    };

    Grid.prototype.drawGoal = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(goal, color)</span> {</span>
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.raphael.path(<span class="hljs-string">"M"</span> + <span class="hljs-keyword">this</span>.left + <span class="hljs-string">","</span> + (<span class="hljs-keyword">this</span>.transY(goal)) + <span class="hljs-string">"H"</span> + <span class="hljs-keyword">this</span>.right).attr(<span class="hljs-string">'stroke'</span>, color).attr(<span class="hljs-string">'stroke-width'</span>, <span class="hljs-keyword">this</span>.options.goalStrokeWidth);
    };

    Grid.prototype.drawEvent = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(event, color)</span> {</span>
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.raphael.path(<span class="hljs-string">"M"</span> + (<span class="hljs-keyword">this</span>.transX(event)) + <span class="hljs-string">","</span> + <span class="hljs-keyword">this</span>.bottom + <span class="hljs-string">"V"</span> + <span class="hljs-keyword">this</span>.top).attr(<span class="hljs-string">'stroke'</span>, color).attr(<span class="hljs-string">'stroke-width'</span>, <span class="hljs-keyword">this</span>.options.eventStrokeWidth);
    };

    Grid.prototype.drawYAxisLabel = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(xPos, yPos, text)</span> {</span>
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.raphael.text(xPos, yPos, text).attr(<span class="hljs-string">'font-size'</span>, <span class="hljs-keyword">this</span>.options.gridTextSize).attr(<span class="hljs-string">'font-family'</span>, <span class="hljs-keyword">this</span>.options.gridTextFamily).attr(<span class="hljs-string">'font-weight'</span>, <span class="hljs-keyword">this</span>.options.gridTextWeight).attr(<span class="hljs-string">'fill'</span>, <span class="hljs-keyword">this</span>.options.gridTextColor).attr(<span class="hljs-string">'text-anchor'</span>, <span class="hljs-string">'end'</span>);
    };

    Grid.prototype.drawGridLine = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(path)</span> {</span>
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.raphael.path(path).attr(<span class="hljs-string">'stroke'</span>, <span class="hljs-keyword">this</span>.options.gridLineColor).attr(<span class="hljs-string">'stroke-width'</span>, <span class="hljs-keyword">this</span>.options.gridStrokeWidth);
    };

    Grid.prototype.startRange = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(x)</span> {</span>
      <span class="hljs-keyword">this</span>.hover.hide();
      <span class="hljs-keyword">this</span>.selectFrom = x;
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.selectionRect.attr({
        x: x,
        width: <span class="hljs-number">0</span>
      }).show();
    };

    Grid.prototype.endRange = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(x)</span> {</span>
      <span class="hljs-keyword">var</span> end, start;
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.selectFrom) {
        start = <span class="hljs-built_in">Math</span>.min(<span class="hljs-keyword">this</span>.selectFrom, x);
        end = <span class="hljs-built_in">Math</span>.max(<span class="hljs-keyword">this</span>.selectFrom, x);
        <span class="hljs-keyword">this</span>.options.rangeSelect.call(<span class="hljs-keyword">this</span>.el, {
          start: <span class="hljs-keyword">this</span>.data[<span class="hljs-keyword">this</span>.hitTest(start)].x,
          end: <span class="hljs-keyword">this</span>.data[<span class="hljs-keyword">this</span>.hitTest(end)].x
        });
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.selectFrom = <span class="hljs-literal">null</span>;
      }
    };

    Grid.prototype.resizeHandler = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
      <span class="hljs-keyword">this</span>.timeoutId = <span class="hljs-literal">null</span>;
      <span class="hljs-keyword">this</span>.raphael.setSize(<span class="hljs-keyword">this</span>.el.width(), <span class="hljs-keyword">this</span>.el.height());
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.redraw();
    };

    <span class="hljs-keyword">return</span> Grid;

  })(Morris.EventEmitter);

  Morris.parseDate = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(date)</span> {</span>
    <span class="hljs-keyword">var</span> isecs, m, msecs, n, o, offsetmins, p, q, r, ret, secs;
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> date === <span class="hljs-string">'number'</span>) {
      <span class="hljs-keyword">return</span> date;
    }
    m = date.match(<span class="hljs-regexp">/^(\d+) Q(\d)$/</span>);
    n = date.match(<span class="hljs-regexp">/^(\d+)-(\d+)$/</span>);
    o = date.match(<span class="hljs-regexp">/^(\d+)-(\d+)-(\d+)$/</span>);
    p = date.match(<span class="hljs-regexp">/^(\d+) W(\d+)$/</span>);
    q = date.match(<span class="hljs-regexp">/^(\d+)-(\d+)-(\d+)[ T](\d+):(\d+)(Z|([+-])(\d\d):?(\d\d))?$/</span>);
    r = date.match(<span class="hljs-regexp">/^(\d+)-(\d+)-(\d+)[ T](\d+):(\d+):(\d+(\.\d+)?)(Z|([+-])(\d\d):?(\d\d))?$/</span>);
    <span class="hljs-keyword">if</span> (m) {
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(<span class="hljs-built_in">parseInt</span>(m[<span class="hljs-number">1</span>], <span class="hljs-number">10</span>), <span class="hljs-built_in">parseInt</span>(m[<span class="hljs-number">2</span>], <span class="hljs-number">10</span>) * <span class="hljs-number">3</span> - <span class="hljs-number">1</span>, <span class="hljs-number">1</span>).getTime();
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (n) {
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(<span class="hljs-built_in">parseInt</span>(n[<span class="hljs-number">1</span>], <span class="hljs-number">10</span>), <span class="hljs-built_in">parseInt</span>(n[<span class="hljs-number">2</span>], <span class="hljs-number">10</span>) - <span class="hljs-number">1</span>, <span class="hljs-number">1</span>).getTime();
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (o) {
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(<span class="hljs-built_in">parseInt</span>(o[<span class="hljs-number">1</span>], <span class="hljs-number">10</span>), <span class="hljs-built_in">parseInt</span>(o[<span class="hljs-number">2</span>], <span class="hljs-number">10</span>) - <span class="hljs-number">1</span>, <span class="hljs-built_in">parseInt</span>(o[<span class="hljs-number">3</span>], <span class="hljs-number">10</span>)).getTime();
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (p) {
      ret = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(<span class="hljs-built_in">parseInt</span>(p[<span class="hljs-number">1</span>], <span class="hljs-number">10</span>), <span class="hljs-number">0</span>, <span class="hljs-number">1</span>);
      <span class="hljs-keyword">if</span> (ret.getDay() !== <span class="hljs-number">4</span>) {
        ret.setMonth(<span class="hljs-number">0</span>, <span class="hljs-number">1</span> + ((<span class="hljs-number">4</span> - ret.getDay()) + <span class="hljs-number">7</span>) % <span class="hljs-number">7</span>);
      }
      <span class="hljs-keyword">return</span> ret.getTime() + <span class="hljs-built_in">parseInt</span>(p[<span class="hljs-number">2</span>], <span class="hljs-number">10</span>) * <span class="hljs-number">604800000</span>;
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (q) {
      <span class="hljs-keyword">if</span> (!q[<span class="hljs-number">6</span>]) {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(<span class="hljs-built_in">parseInt</span>(q[<span class="hljs-number">1</span>], <span class="hljs-number">10</span>), <span class="hljs-built_in">parseInt</span>(q[<span class="hljs-number">2</span>], <span class="hljs-number">10</span>) - <span class="hljs-number">1</span>, <span class="hljs-built_in">parseInt</span>(q[<span class="hljs-number">3</span>], <span class="hljs-number">10</span>), <span class="hljs-built_in">parseInt</span>(q[<span class="hljs-number">4</span>], <span class="hljs-number">10</span>), <span class="hljs-built_in">parseInt</span>(q[<span class="hljs-number">5</span>], <span class="hljs-number">10</span>)).getTime();
      } <span class="hljs-keyword">else</span> {
        offsetmins = <span class="hljs-number">0</span>;
        <span class="hljs-keyword">if</span> (q[<span class="hljs-number">6</span>] !== <span class="hljs-string">'Z'</span>) {
          offsetmins = <span class="hljs-built_in">parseInt</span>(q[<span class="hljs-number">8</span>], <span class="hljs-number">10</span>) * <span class="hljs-number">60</span> + <span class="hljs-built_in">parseInt</span>(q[<span class="hljs-number">9</span>], <span class="hljs-number">10</span>);
          <span class="hljs-keyword">if</span> (q[<span class="hljs-number">7</span>] === <span class="hljs-string">'+'</span>) {
            offsetmins = <span class="hljs-number">0</span> - offsetmins;
          }
        }
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">Date</span>.UTC(<span class="hljs-built_in">parseInt</span>(q[<span class="hljs-number">1</span>], <span class="hljs-number">10</span>), <span class="hljs-built_in">parseInt</span>(q[<span class="hljs-number">2</span>], <span class="hljs-number">10</span>) - <span class="hljs-number">1</span>, <span class="hljs-built_in">parseInt</span>(q[<span class="hljs-number">3</span>], <span class="hljs-number">10</span>), <span class="hljs-built_in">parseInt</span>(q[<span class="hljs-number">4</span>], <span class="hljs-number">10</span>), <span class="hljs-built_in">parseInt</span>(q[<span class="hljs-number">5</span>], <span class="hljs-number">10</span>) + offsetmins);
      }
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (r) {
      secs = <span class="hljs-built_in">parseFloat</span>(r[<span class="hljs-number">6</span>]);
      isecs = <span class="hljs-built_in">Math</span>.floor(secs);
      msecs = <span class="hljs-built_in">Math</span>.round((secs - isecs) * <span class="hljs-number">1000</span>);
      <span class="hljs-keyword">if</span> (!r[<span class="hljs-number">8</span>]) {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(<span class="hljs-built_in">parseInt</span>(r[<span class="hljs-number">1</span>], <span class="hljs-number">10</span>), <span class="hljs-built_in">parseInt</span>(r[<span class="hljs-number">2</span>], <span class="hljs-number">10</span>) - <span class="hljs-number">1</span>, <span class="hljs-built_in">parseInt</span>(r[<span class="hljs-number">3</span>], <span class="hljs-number">10</span>), <span class="hljs-built_in">parseInt</span>(r[<span class="hljs-number">4</span>], <span class="hljs-number">10</span>), <span class="hljs-built_in">parseInt</span>(r[<span class="hljs-number">5</span>], <span class="hljs-number">10</span>), isecs, msecs).getTime();
      } <span class="hljs-keyword">else</span> {
        offsetmins = <span class="hljs-number">0</span>;
        <span class="hljs-keyword">if</span> (r[<span class="hljs-number">8</span>] !== <span class="hljs-string">'Z'</span>) {
          offsetmins = <span class="hljs-built_in">parseInt</span>(r[<span class="hljs-number">10</span>], <span class="hljs-number">10</span>) * <span class="hljs-number">60</span> + <span class="hljs-built_in">parseInt</span>(r[<span class="hljs-number">11</span>], <span class="hljs-number">10</span>);
          <span class="hljs-keyword">if</span> (r[<span class="hljs-number">9</span>] === <span class="hljs-string">'+'</span>) {
            offsetmins = <span class="hljs-number">0</span> - offsetmins;
          }
        }
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">Date</span>.UTC(<span class="hljs-built_in">parseInt</span>(r[<span class="hljs-number">1</span>], <span class="hljs-number">10</span>), <span class="hljs-built_in">parseInt</span>(r[<span class="hljs-number">2</span>], <span class="hljs-number">10</span>) - <span class="hljs-number">1</span>, <span class="hljs-built_in">parseInt</span>(r[<span class="hljs-number">3</span>], <span class="hljs-number">10</span>), <span class="hljs-built_in">parseInt</span>(r[<span class="hljs-number">4</span>], <span class="hljs-number">10</span>), <span class="hljs-built_in">parseInt</span>(r[<span class="hljs-number">5</span>], <span class="hljs-number">10</span>) + offsetmins, isecs, msecs);
      }
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(<span class="hljs-built_in">parseInt</span>(date, <span class="hljs-number">10</span>), <span class="hljs-number">0</span>, <span class="hljs-number">1</span>).getTime();
    }
  };

  Morris.Hover = (<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
    Hover.defaults = {
      <span class="hljs-string">"class"</span>: <span class="hljs-string">'morris-hover morris-default-style'</span>
    };

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Hover</span><span class="hljs-params">(options)</span> {</span>
      <span class="hljs-keyword">if</span> (options == <span class="hljs-literal">null</span>) {
        options = {};
      }
      <span class="hljs-keyword">this</span>.options = $.extend({}, Morris.Hover.defaults, options);
      <span class="hljs-keyword">this</span>.el = $(<span class="hljs-string">"&lt;div class='"</span> + <span class="hljs-keyword">this</span>.options[<span class="hljs-string">"class"</span>] + <span class="hljs-string">"'&gt;&lt;/div&gt;"</span>);
      <span class="hljs-keyword">this</span>.el.hide();
      <span class="hljs-keyword">this</span>.options.parent.append(<span class="hljs-keyword">this</span>.el);
    }

    Hover.prototype.update = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(html, x, y)</span> {</span>
      <span class="hljs-keyword">this</span>.html(html);
      <span class="hljs-keyword">this</span>.show();
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.moveTo(x, y);
    };

    Hover.prototype.html = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(content)</span> {</span>
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.el.html(content);
    };

    Hover.prototype.moveTo = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(x, y)</span> {</span>
      <span class="hljs-keyword">var</span> hoverHeight, hoverWidth, left, parentHeight, parentWidth, top;
      parentWidth = <span class="hljs-keyword">this</span>.options.parent.innerWidth();
      parentHeight = <span class="hljs-keyword">this</span>.options.parent.innerHeight();
      hoverWidth = <span class="hljs-keyword">this</span>.el.outerWidth();
      hoverHeight = <span class="hljs-keyword">this</span>.el.outerHeight();
      left = <span class="hljs-built_in">Math</span>.min(<span class="hljs-built_in">Math</span>.max(<span class="hljs-number">0</span>, x - hoverWidth / <span class="hljs-number">2</span>), parentWidth - hoverWidth);
      <span class="hljs-keyword">if</span> (y != <span class="hljs-literal">null</span>) {
        top = y - hoverHeight - <span class="hljs-number">10</span>;
        <span class="hljs-keyword">if</span> (top &lt; <span class="hljs-number">0</span>) {
          top = y + <span class="hljs-number">10</span>;
          <span class="hljs-keyword">if</span> (top + hoverHeight &gt; parentHeight) {
            top = parentHeight / <span class="hljs-number">2</span> - hoverHeight / <span class="hljs-number">2</span>;
          }
        }
      } <span class="hljs-keyword">else</span> {
        top = parentHeight / <span class="hljs-number">2</span> - hoverHeight / <span class="hljs-number">2</span>;
      }
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.el.css({
        left: left + <span class="hljs-string">"px"</span>,
        top: <span class="hljs-built_in">parseInt</span>(top) + <span class="hljs-string">"px"</span>
      });
    };

    Hover.prototype.show = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.el.show();
    };

    Hover.prototype.hide = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.el.hide();
    };

    <span class="hljs-keyword">return</span> Hover;

  })();

  Morris.Line = (<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(_super)</span> {</span>
    __extends(Line, _super);

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Line</span><span class="hljs-params">(options)</span> {</span>
      <span class="hljs-keyword">this</span>.hilight = __bind(<span class="hljs-keyword">this</span>.hilight, <span class="hljs-keyword">this</span>);
      <span class="hljs-keyword">this</span>.onHoverOut = __bind(<span class="hljs-keyword">this</span>.onHoverOut, <span class="hljs-keyword">this</span>);
      <span class="hljs-keyword">this</span>.onHoverMove = __bind(<span class="hljs-keyword">this</span>.onHoverMove, <span class="hljs-keyword">this</span>);
      <span class="hljs-keyword">this</span>.onGridClick = __bind(<span class="hljs-keyword">this</span>.onGridClick, <span class="hljs-keyword">this</span>);
      <span class="hljs-keyword">if</span> (!(<span class="hljs-keyword">this</span> <span class="hljs-keyword">instanceof</span> Morris.Line)) {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Morris.Line(options);
      }
      Line.__super__.constructor.call(<span class="hljs-keyword">this</span>, options);
    }

    Line.prototype.init = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.options.hideHover !== <span class="hljs-string">'always'</span>) {
        <span class="hljs-keyword">this</span>.hover = <span class="hljs-keyword">new</span> Morris.Hover({
          parent: <span class="hljs-keyword">this</span>.el
        });
        <span class="hljs-keyword">this</span>.on(<span class="hljs-string">'hovermove'</span>, <span class="hljs-keyword">this</span>.onHoverMove);
        <span class="hljs-keyword">this</span>.on(<span class="hljs-string">'hoverout'</span>, <span class="hljs-keyword">this</span>.onHoverOut);
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.on(<span class="hljs-string">'gridclick'</span>, <span class="hljs-keyword">this</span>.onGridClick);
      }
    };

    Line.prototype.defaults = {
      lineWidth: <span class="hljs-number">3</span>,
      pointSize: <span class="hljs-number">4</span>,
      lineColors: [<span class="hljs-string">'#0b62a4'</span>, <span class="hljs-string">'#7A92A3'</span>, <span class="hljs-string">'#4da74d'</span>, <span class="hljs-string">'#afd8f8'</span>, <span class="hljs-string">'#edc240'</span>, <span class="hljs-string">'#cb4b4b'</span>, <span class="hljs-string">'#9440ed'</span>],
      pointStrokeWidths: [<span class="hljs-number">1</span>],
      pointStrokeColors: [<span class="hljs-string">'#ffffff'</span>],
      pointFillColors: [],
      smooth: <span class="hljs-literal">true</span>,
      xLabels: <span class="hljs-string">'auto'</span>,
      xLabelFormat: <span class="hljs-literal">null</span>,
      xLabelMargin: <span class="hljs-number">24</span>,
      continuousLine: <span class="hljs-literal">true</span>,
      hideHover: <span class="hljs-literal">false</span>
    };

    Line.prototype.calc = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
      <span class="hljs-keyword">this</span>.calcPoints();
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.generatePaths();
    };

    Line.prototype.calcPoints = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
      <span class="hljs-keyword">var</span> row, y, _i, _len, _ref, _results;
      _ref = <span class="hljs-keyword">this</span>.data;
      _results = [];
      <span class="hljs-keyword">for</span> (_i = <span class="hljs-number">0</span>, _len = _ref.length; _i &lt; _len; _i++) {
        row = _ref[_i];
        row._x = <span class="hljs-keyword">this</span>.transX(row.x);
        row._y = (<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
          <span class="hljs-keyword">var</span> _j, _len1, _ref1, _results1;
          _ref1 = row.y;
          _results1 = [];
          <span class="hljs-keyword">for</span> (_j = <span class="hljs-number">0</span>, _len1 = _ref1.length; _j &lt; _len1; _j++) {
            y = _ref1[_j];
            <span class="hljs-keyword">if</span> (y != <span class="hljs-literal">null</span>) {
              _results1.push(<span class="hljs-keyword">this</span>.transY(y));
            } <span class="hljs-keyword">else</span> {
              _results1.push(y);
            }
          }
          <span class="hljs-keyword">return</span> _results1;
        }).call(<span class="hljs-keyword">this</span>);
        _results.push(row._ymax = <span class="hljs-built_in">Math</span>.min.apply(<span class="hljs-built_in">Math</span>, [<span class="hljs-keyword">this</span>.bottom].concat((<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
          <span class="hljs-keyword">var</span> _j, _len1, _ref1, _results1;
          _ref1 = row._y;
          _results1 = [];
          <span class="hljs-keyword">for</span> (_j = <span class="hljs-number">0</span>, _len1 = _ref1.length; _j &lt; _len1; _j++) {
            y = _ref1[_j];
            <span class="hljs-keyword">if</span> (y != <span class="hljs-literal">null</span>) {
              _results1.push(y);
            }
          }
          <span class="hljs-keyword">return</span> _results1;
        })())));
      }
      <span class="hljs-keyword">return</span> _results;
    };

    Line.prototype.hitTest = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(x)</span> {</span>
      <span class="hljs-keyword">var</span> index, r, _i, _len, _ref;
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.data.length === <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
      }
      _ref = <span class="hljs-keyword">this</span>.data.slice(<span class="hljs-number">1</span>);
      <span class="hljs-keyword">for</span> (index = _i = <span class="hljs-number">0</span>, _len = _ref.length; _i &lt; _len; index = ++_i) {
        r = _ref[index];
        <span class="hljs-keyword">if</span> (x &lt; (r._x + <span class="hljs-keyword">this</span>.data[index]._x) / <span class="hljs-number">2</span>) {
          <span class="hljs-keyword">break</span>;
        }
      }
      <span class="hljs-keyword">return</span> index;
    };

    Line.prototype.onGridClick = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(x, y)</span> {</span>
      <span class="hljs-keyword">var</span> index;
      index = <span class="hljs-keyword">this</span>.hitTest(x);
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.fire(<span class="hljs-string">'click'</span>, index, <span class="hljs-keyword">this</span>.data[index].src, x, y);
    };

    Line.prototype.onHoverMove = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(x, y)</span> {</span>
      <span class="hljs-keyword">var</span> index;
      index = <span class="hljs-keyword">this</span>.hitTest(x);
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.displayHoverForRow(index);
    };

    Line.prototype.onHoverOut = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.options.hideHover !== <span class="hljs-literal">false</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.displayHoverForRow(<span class="hljs-literal">null</span>);
      }
    };

    Line.prototype.displayHoverForRow = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(index)</span> {</span>
      <span class="hljs-keyword">var</span> _ref;
      <span class="hljs-keyword">if</span> (index != <span class="hljs-literal">null</span>) {
        (_ref = <span class="hljs-keyword">this</span>.hover).update.apply(_ref, <span class="hljs-keyword">this</span>.hoverContentForRow(index));
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.hilight(index);
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">this</span>.hover.hide();
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.hilight();
      }
    };

    Line.prototype.hoverContentForRow = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(index)</span> {</span>
      <span class="hljs-keyword">var</span> content, j, row, y, _i, _len, _ref;
      row = <span class="hljs-keyword">this</span>.data[index];
      content = <span class="hljs-string">"&lt;div class='morris-hover-row-label'&gt;"</span> + row.label + <span class="hljs-string">"&lt;/div&gt;"</span>;
      _ref = row.y;
      <span class="hljs-keyword">for</span> (j = _i = <span class="hljs-number">0</span>, _len = _ref.length; _i &lt; _len; j = ++_i) {
        y = _ref[j];
        content += <span class="hljs-string">"&lt;div class='morris-hover-point' style='color: "</span> + (<span class="hljs-keyword">this</span>.colorFor(row, j, <span class="hljs-string">'label'</span>)) + <span class="hljs-string">"'&gt;\n  "</span> + <span class="hljs-keyword">this</span>.options.labels[j] + <span class="hljs-string">":\n  "</span> + (<span class="hljs-keyword">this</span>.yLabelFormat(y)) + <span class="hljs-string">"\n&lt;/div&gt;"</span>;
      }
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-keyword">this</span>.options.hoverCallback === <span class="hljs-string">'function'</span>) {
        content = <span class="hljs-keyword">this</span>.options.hoverCallback(index, <span class="hljs-keyword">this</span>.options, content, row.src);
      }
      <span class="hljs-keyword">return</span> [content, row._x, row._ymax];
    };

    Line.prototype.generatePaths = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
      <span class="hljs-keyword">var</span> c, coords, i, r, smooth;
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.paths = (<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
        <span class="hljs-keyword">var</span> _i, _ref, _ref1, _results;
        _results = [];
        <span class="hljs-keyword">for</span> (i = _i = <span class="hljs-number">0</span>, _ref = <span class="hljs-keyword">this</span>.options.ykeys.length; <span class="hljs-number">0</span> &lt;= _ref ? _i &lt; _ref : _i &gt; _ref; i = <span class="hljs-number">0</span> &lt;= _ref ? ++_i : --_i) {
          smooth = <span class="hljs-keyword">typeof</span> <span class="hljs-keyword">this</span>.options.smooth === <span class="hljs-string">"boolean"</span> ? <span class="hljs-keyword">this</span>.options.smooth : (_ref1 = <span class="hljs-keyword">this</span>.options.ykeys[i], __indexOf.call(<span class="hljs-keyword">this</span>.options.smooth, _ref1) &gt;= <span class="hljs-number">0</span>);
          coords = (<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
            <span class="hljs-keyword">var</span> _j, _len, _ref2, _results1;
            _ref2 = <span class="hljs-keyword">this</span>.data;
            _results1 = [];
            <span class="hljs-keyword">for</span> (_j = <span class="hljs-number">0</span>, _len = _ref2.length; _j &lt; _len; _j++) {
              r = _ref2[_j];
              <span class="hljs-keyword">if</span> (r._y[i] !== <span class="hljs-keyword">void</span> <span class="hljs-number">0</span>) {
                _results1.push({
                  x: r._x,
                  y: r._y[i]
                });
              }
            }
            <span class="hljs-keyword">return</span> _results1;
          }).call(<span class="hljs-keyword">this</span>);
          <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.options.continuousLine) {
            coords = (<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
              <span class="hljs-keyword">var</span> _j, _len, _results1;
              _results1 = [];
              <span class="hljs-keyword">for</span> (_j = <span class="hljs-number">0</span>, _len = coords.length; _j &lt; _len; _j++) {
                c = coords[_j];
                <span class="hljs-keyword">if</span> (c.y !== <span class="hljs-literal">null</span>) {
                  _results1.push(c);
                }
              }
              <span class="hljs-keyword">return</span> _results1;
            })();
          }
          <span class="hljs-keyword">if</span> (coords.length &gt; <span class="hljs-number">1</span>) {
            _results.push(Morris.Line.createPath(coords, smooth, <span class="hljs-keyword">this</span>.bottom));
          } <span class="hljs-keyword">else</span> {
            _results.push(<span class="hljs-literal">null</span>);
          }
        }
        <span class="hljs-keyword">return</span> _results;
      }).call(<span class="hljs-keyword">this</span>);
    };

    Line.prototype.draw = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
      <span class="hljs-keyword">var</span> _ref;
      <span class="hljs-keyword">if</span> ((_ref = <span class="hljs-keyword">this</span>.options.axes) === <span class="hljs-literal">true</span> || _ref === <span class="hljs-string">'both'</span> || _ref === <span class="hljs-string">'x'</span>) {
        <span class="hljs-keyword">this</span>.drawXAxis();
      }
      <span class="hljs-keyword">this</span>.drawSeries();
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.options.hideHover === <span class="hljs-literal">false</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.displayHoverForRow(<span class="hljs-keyword">this</span>.data.length - <span class="hljs-number">1</span>);
      }
    };

    Line.prototype.drawXAxis = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
      <span class="hljs-keyword">var</span> drawLabel, l, labels, prevAngleMargin, prevLabelMargin, row, ypos, _i, _len, _results,
        _this = <span class="hljs-keyword">this</span>;
      ypos = <span class="hljs-keyword">this</span>.bottom + <span class="hljs-keyword">this</span>.options.padding / <span class="hljs-number">2</span>;
      prevLabelMargin = <span class="hljs-literal">null</span>;
      prevAngleMargin = <span class="hljs-literal">null</span>;
      drawLabel = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(labelText, xpos)</span> {</span>
        <span class="hljs-keyword">var</span> label, labelBox, margin, offset, textBox;
        label = _this.drawXAxisLabel(_this.transX(xpos), ypos, labelText);
        textBox = label.getBBox();
        label.transform(<span class="hljs-string">"r"</span> + (-_this.options.xLabelAngle));
        labelBox = label.getBBox();
        label.transform(<span class="hljs-string">"t0,"</span> + (labelBox.height / <span class="hljs-number">2</span>) + <span class="hljs-string">"..."</span>);
        <span class="hljs-keyword">if</span> (_this.options.xLabelAngle !== <span class="hljs-number">0</span>) {
          offset = -<span class="hljs-number">0.5</span> * textBox.width * <span class="hljs-built_in">Math</span>.cos(_this.options.xLabelAngle * <span class="hljs-built_in">Math</span>.PI / <span class="hljs-number">180.0</span>);
          label.transform(<span class="hljs-string">"t"</span> + offset + <span class="hljs-string">",0..."</span>);
        }
        labelBox = label.getBBox();
        <span class="hljs-keyword">if</span> (((prevLabelMargin == <span class="hljs-literal">null</span>) || prevLabelMargin &gt;= labelBox.x + labelBox.width || (prevAngleMargin != <span class="hljs-literal">null</span>) &amp;&amp; prevAngleMargin &gt;= labelBox.x) &amp;&amp; labelBox.x &gt;= <span class="hljs-number">0</span> &amp;&amp; (labelBox.x + labelBox.width) &lt; _this.el.width()) {
          <span class="hljs-keyword">if</span> (_this.options.xLabelAngle !== <span class="hljs-number">0</span>) {
            margin = <span class="hljs-number">1.25</span> * _this.options.gridTextSize / <span class="hljs-built_in">Math</span>.sin(_this.options.xLabelAngle * <span class="hljs-built_in">Math</span>.PI / <span class="hljs-number">180.0</span>);
            prevAngleMargin = labelBox.x - margin;
          }
          <span class="hljs-keyword">return</span> prevLabelMargin = labelBox.x - _this.options.xLabelMargin;
        } <span class="hljs-keyword">else</span> {
          <span class="hljs-keyword">return</span> label.remove();
        }
      };
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.options.parseTime) {
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.data.length === <span class="hljs-number">1</span> &amp;&amp; <span class="hljs-keyword">this</span>.options.xLabels === <span class="hljs-string">'auto'</span>) {
          labels = [[<span class="hljs-keyword">this</span>.data[<span class="hljs-number">0</span>].label, <span class="hljs-keyword">this</span>.data[<span class="hljs-number">0</span>].x]];
        } <span class="hljs-keyword">else</span> {
          labels = Morris.labelSeries(<span class="hljs-keyword">this</span>.xmin, <span class="hljs-keyword">this</span>.xmax, <span class="hljs-keyword">this</span>.width, <span class="hljs-keyword">this</span>.options.xLabels, <span class="hljs-keyword">this</span>.options.xLabelFormat);
        }
      } <span class="hljs-keyword">else</span> {
        labels = (<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
          <span class="hljs-keyword">var</span> _i, _len, _ref, _results;
          _ref = <span class="hljs-keyword">this</span>.data;
          _results = [];
          <span class="hljs-keyword">for</span> (_i = <span class="hljs-number">0</span>, _len = _ref.length; _i &lt; _len; _i++) {
            row = _ref[_i];
            _results.push([row.label, row.x]);
          }
          <span class="hljs-keyword">return</span> _results;
        }).call(<span class="hljs-keyword">this</span>);
      }
      labels.reverse();
      _results = [];
      <span class="hljs-keyword">for</span> (_i = <span class="hljs-number">0</span>, _len = labels.length; _i &lt; _len; _i++) {
        l = labels[_i];
        _results.push(drawLabel(l[<span class="hljs-number">0</span>], l[<span class="hljs-number">1</span>]));
      }
      <span class="hljs-keyword">return</span> _results;
    };

    Line.prototype.drawSeries = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
      <span class="hljs-keyword">var</span> i, _i, _j, _ref, _ref1, _results;
      <span class="hljs-keyword">this</span>.seriesPoints = [];
      <span class="hljs-keyword">for</span> (i = _i = _ref = <span class="hljs-keyword">this</span>.options.ykeys.length - <span class="hljs-number">1</span>; _ref &lt;= <span class="hljs-number">0</span> ? _i &lt;= <span class="hljs-number">0</span> : _i &gt;= <span class="hljs-number">0</span>; i = _ref &lt;= <span class="hljs-number">0</span> ? ++_i : --_i) {
        <span class="hljs-keyword">this</span>._drawLineFor(i);
      }
      _results = [];
      <span class="hljs-keyword">for</span> (i = _j = _ref1 = <span class="hljs-keyword">this</span>.options.ykeys.length - <span class="hljs-number">1</span>; _ref1 &lt;= <span class="hljs-number">0</span> ? _j &lt;= <span class="hljs-number">0</span> : _j &gt;= <span class="hljs-number">0</span>; i = _ref1 &lt;= <span class="hljs-number">0</span> ? ++_j : --_j) {
        _results.push(<span class="hljs-keyword">this</span>._drawPointFor(i));
      }
      <span class="hljs-keyword">return</span> _results;
    };

    Line.prototype._drawPointFor = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(index)</span> {</span>
      <span class="hljs-keyword">var</span> circle, row, _i, _len, _ref, _results;
      <span class="hljs-keyword">this</span>.seriesPoints[index] = [];
      _ref = <span class="hljs-keyword">this</span>.data;
      _results = [];
      <span class="hljs-keyword">for</span> (_i = <span class="hljs-number">0</span>, _len = _ref.length; _i &lt; _len; _i++) {
        row = _ref[_i];
        circle = <span class="hljs-literal">null</span>;
        <span class="hljs-keyword">if</span> (row._y[index] != <span class="hljs-literal">null</span>) {
          circle = <span class="hljs-keyword">this</span>.drawLinePoint(row._x, row._y[index], <span class="hljs-keyword">this</span>.colorFor(row, index, <span class="hljs-string">'point'</span>), index);
        }
        _results.push(<span class="hljs-keyword">this</span>.seriesPoints[index].push(circle));
      }
      <span class="hljs-keyword">return</span> _results;
    };

    Line.prototype._drawLineFor = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(index)</span> {</span>
      <span class="hljs-keyword">var</span> path;
      path = <span class="hljs-keyword">this</span>.paths[index];
      <span class="hljs-keyword">if</span> (path !== <span class="hljs-literal">null</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.drawLinePath(path, <span class="hljs-keyword">this</span>.colorFor(<span class="hljs-literal">null</span>, index, <span class="hljs-string">'line'</span>), index);
      }
    };

    Line.createPath = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(coords, smooth, bottom)</span> {</span>
      <span class="hljs-keyword">var</span> coord, g, grads, i, ix, lg, path, prevCoord, x1, x2, y1, y2, _i, _len;
      path = <span class="hljs-string">""</span>;
      <span class="hljs-keyword">if</span> (smooth) {
        grads = Morris.Line.gradients(coords);
      }
      prevCoord = {
        y: <span class="hljs-literal">null</span>
      };
      <span class="hljs-keyword">for</span> (i = _i = <span class="hljs-number">0</span>, _len = coords.length; _i &lt; _len; i = ++_i) {
        coord = coords[i];
        <span class="hljs-keyword">if</span> (coord.y != <span class="hljs-literal">null</span>) {
          <span class="hljs-keyword">if</span> (prevCoord.y != <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">if</span> (smooth) {
              g = grads[i];
              lg = grads[i - <span class="hljs-number">1</span>];
              ix = (coord.x - prevCoord.x) / <span class="hljs-number">4</span>;
              x1 = prevCoord.x + ix;
              y1 = <span class="hljs-built_in">Math</span>.min(bottom, prevCoord.y + ix * lg);
              x2 = coord.x - ix;
              y2 = <span class="hljs-built_in">Math</span>.min(bottom, coord.y - ix * g);
              path += <span class="hljs-string">"C"</span> + x1 + <span class="hljs-string">","</span> + y1 + <span class="hljs-string">","</span> + x2 + <span class="hljs-string">","</span> + y2 + <span class="hljs-string">","</span> + coord.x + <span class="hljs-string">","</span> + coord.y;
            } <span class="hljs-keyword">else</span> {
              path += <span class="hljs-string">"L"</span> + coord.x + <span class="hljs-string">","</span> + coord.y;
            }
          } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">if</span> (!smooth || (grads[i] != <span class="hljs-literal">null</span>)) {
              path += <span class="hljs-string">"M"</span> + coord.x + <span class="hljs-string">","</span> + coord.y;
            }
          }
        }
        prevCoord = coord;
      }
      <span class="hljs-keyword">return</span> path;
    };

    Line.gradients = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(coords)</span> {</span>
      <span class="hljs-keyword">var</span> coord, grad, i, nextCoord, prevCoord, _i, _len, _results;
      grad = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(a, b)</span> {</span>
        <span class="hljs-keyword">return</span> (a.y - b.y) / (a.x - b.x);
      };
      _results = [];
      <span class="hljs-keyword">for</span> (i = _i = <span class="hljs-number">0</span>, _len = coords.length; _i &lt; _len; i = ++_i) {
        coord = coords[i];
        <span class="hljs-keyword">if</span> (coord.y != <span class="hljs-literal">null</span>) {
          nextCoord = coords[i + <span class="hljs-number">1</span>] || {
            y: <span class="hljs-literal">null</span>
          };
          prevCoord = coords[i - <span class="hljs-number">1</span>] || {
            y: <span class="hljs-literal">null</span>
          };
          <span class="hljs-keyword">if</span> ((prevCoord.y != <span class="hljs-literal">null</span>) &amp;&amp; (nextCoord.y != <span class="hljs-literal">null</span>)) {
            _results.push(grad(prevCoord, nextCoord));
          } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (prevCoord.y != <span class="hljs-literal">null</span>) {
            _results.push(grad(prevCoord, coord));
          } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (nextCoord.y != <span class="hljs-literal">null</span>) {
            _results.push(grad(coord, nextCoord));
          } <span class="hljs-keyword">else</span> {
            _results.push(<span class="hljs-literal">null</span>);
          }
        } <span class="hljs-keyword">else</span> {
          _results.push(<span class="hljs-literal">null</span>);
        }
      }
      <span class="hljs-keyword">return</span> _results;
    };

    Line.prototype.hilight = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(index)</span> {</span>
      <span class="hljs-keyword">var</span> i, _i, _j, _ref, _ref1;
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.prevHilight !== <span class="hljs-literal">null</span> &amp;&amp; <span class="hljs-keyword">this</span>.prevHilight !== index) {
        <span class="hljs-keyword">for</span> (i = _i = <span class="hljs-number">0</span>, _ref = <span class="hljs-keyword">this</span>.seriesPoints.length - <span class="hljs-number">1</span>; <span class="hljs-number">0</span> &lt;= _ref ? _i &lt;= _ref : _i &gt;= _ref; i = <span class="hljs-number">0</span> &lt;= _ref ? ++_i : --_i) {
          <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.seriesPoints[i][<span class="hljs-keyword">this</span>.prevHilight]) {
            <span class="hljs-keyword">this</span>.seriesPoints[i][<span class="hljs-keyword">this</span>.prevHilight].animate(<span class="hljs-keyword">this</span>.pointShrinkSeries(i));
          }
        }
      }
      <span class="hljs-keyword">if</span> (index !== <span class="hljs-literal">null</span> &amp;&amp; <span class="hljs-keyword">this</span>.prevHilight !== index) {
        <span class="hljs-keyword">for</span> (i = _j = <span class="hljs-number">0</span>, _ref1 = <span class="hljs-keyword">this</span>.seriesPoints.length - <span class="hljs-number">1</span>; <span class="hljs-number">0</span> &lt;= _ref1 ? _j &lt;= _ref1 : _j &gt;= _ref1; i = <span class="hljs-number">0</span> &lt;= _ref1 ? ++_j : --_j) {
          <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.seriesPoints[i][index]) {
            <span class="hljs-keyword">this</span>.seriesPoints[i][index].animate(<span class="hljs-keyword">this</span>.pointGrowSeries(i));
          }
        }
      }
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.prevHilight = index;
    };

    Line.prototype.colorFor = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(row, sidx, type)</span> {</span>
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-keyword">this</span>.options.lineColors === <span class="hljs-string">'function'</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.options.lineColors.call(<span class="hljs-keyword">this</span>, row, sidx, type);
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (type === <span class="hljs-string">'point'</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.options.pointFillColors[sidx % <span class="hljs-keyword">this</span>.options.pointFillColors.length] || <span class="hljs-keyword">this</span>.options.lineColors[sidx % <span class="hljs-keyword">this</span>.options.lineColors.length];
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.options.lineColors[sidx % <span class="hljs-keyword">this</span>.options.lineColors.length];
      }
    };

    Line.prototype.drawXAxisLabel = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(xPos, yPos, text)</span> {</span>
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.raphael.text(xPos, yPos, text).attr(<span class="hljs-string">'font-size'</span>, <span class="hljs-keyword">this</span>.options.gridTextSize).attr(<span class="hljs-string">'font-family'</span>, <span class="hljs-keyword">this</span>.options.gridTextFamily).attr(<span class="hljs-string">'font-weight'</span>, <span class="hljs-keyword">this</span>.options.gridTextWeight).attr(<span class="hljs-string">'fill'</span>, <span class="hljs-keyword">this</span>.options.gridTextColor);
    };

    Line.prototype.drawLinePath = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(path, lineColor, lineIndex)</span> {</span>
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.raphael.path(path).attr(<span class="hljs-string">'stroke'</span>, lineColor).attr(<span class="hljs-string">'stroke-width'</span>, <span class="hljs-keyword">this</span>.lineWidthForSeries(lineIndex));
    };

    Line.prototype.drawLinePoint = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(xPos, yPos, pointColor, lineIndex)</span> {</span>
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.raphael.circle(xPos, yPos, <span class="hljs-keyword">this</span>.pointSizeForSeries(lineIndex)).attr(<span class="hljs-string">'fill'</span>, pointColor).attr(<span class="hljs-string">'stroke-width'</span>, <span class="hljs-keyword">this</span>.pointStrokeWidthForSeries(lineIndex)).attr(<span class="hljs-string">'stroke'</span>, <span class="hljs-keyword">this</span>.pointStrokeColorForSeries(lineIndex));
    };

    Line.prototype.pointStrokeWidthForSeries = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(index)</span> {</span>
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.options.pointStrokeWidths[index % <span class="hljs-keyword">this</span>.options.pointStrokeWidths.length];
    };

    Line.prototype.pointStrokeColorForSeries = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(index)</span> {</span>
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.options.pointStrokeColors[index % <span class="hljs-keyword">this</span>.options.pointStrokeColors.length];
    };

    Line.prototype.lineWidthForSeries = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(index)</span> {</span>
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.options.lineWidth <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">Array</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.options.lineWidth[index % <span class="hljs-keyword">this</span>.options.lineWidth.length];
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.options.lineWidth;
      }
    };

    Line.prototype.pointSizeForSeries = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(index)</span> {</span>
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.options.pointSize <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">Array</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.options.pointSize[index % <span class="hljs-keyword">this</span>.options.pointSize.length];
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.options.pointSize;
      }
    };

    Line.prototype.pointGrowSeries = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(index)</span> {</span>
      <span class="hljs-keyword">return</span> Raphael.animation({
        r: <span class="hljs-keyword">this</span>.pointSizeForSeries(index) + <span class="hljs-number">3</span>
      }, <span class="hljs-number">25</span>, <span class="hljs-string">'linear'</span>);
    };

    Line.prototype.pointShrinkSeries = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(index)</span> {</span>
      <span class="hljs-keyword">return</span> Raphael.animation({
        r: <span class="hljs-keyword">this</span>.pointSizeForSeries(index)
      }, <span class="hljs-number">25</span>, <span class="hljs-string">'linear'</span>);
    };

    <span class="hljs-keyword">return</span> Line;

  })(Morris.Grid);

  Morris.labelSeries = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(dmin, dmax, pxwidth, specName, xLabelFormat)</span> {</span>
    <span class="hljs-keyword">var</span> d, d0, ddensity, name, ret, s, spec, t, _i, _len, _ref;
    ddensity = <span class="hljs-number">200</span> * (dmax - dmin) / pxwidth;
    d0 = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(dmin);
    spec = Morris.LABEL_SPECS[specName];
    <span class="hljs-keyword">if</span> (spec === <span class="hljs-keyword">void</span> <span class="hljs-number">0</span>) {
      _ref = Morris.AUTO_LABEL_ORDER;
      <span class="hljs-keyword">for</span> (_i = <span class="hljs-number">0</span>, _len = _ref.length; _i &lt; _len; _i++) {
        name = _ref[_i];
        s = Morris.LABEL_SPECS[name];
        <span class="hljs-keyword">if</span> (ddensity &gt;= s.span) {
          spec = s;
          <span class="hljs-keyword">break</span>;
        }
      }
    }
    <span class="hljs-keyword">if</span> (spec === <span class="hljs-keyword">void</span> <span class="hljs-number">0</span>) {
      spec = Morris.LABEL_SPECS[<span class="hljs-string">"second"</span>];
    }
    <span class="hljs-keyword">if</span> (xLabelFormat) {
      spec = $.extend({}, spec, {
        fmt: xLabelFormat
      });
    }
    d = spec.start(d0);
    ret = [];
    <span class="hljs-keyword">while</span> ((t = d.getTime()) &lt;= dmax) {
      <span class="hljs-keyword">if</span> (t &gt;= dmin) {
        ret.push([spec.fmt(d), t]);
      }
      spec.incr(d);
    }
    <span class="hljs-keyword">return</span> ret;
  };

  minutesSpecHelper = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(interval)</span> {</span>
    <span class="hljs-keyword">return</span> {
      span: interval * <span class="hljs-number">60</span> * <span class="hljs-number">1000</span>,
      start: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(d)</span> {</span>
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(d.getFullYear(), d.getMonth(), d.getDate(), d.getHours());
      },
      fmt: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(d)</span> {</span>
        <span class="hljs-keyword">return</span> <span class="hljs-string">""</span> + (Morris.pad2(d.getHours())) + <span class="hljs-string">":"</span> + (Morris.pad2(d.getMinutes()));
      },
      incr: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(d)</span> {</span>
        <span class="hljs-keyword">return</span> d.setUTCMinutes(d.getUTCMinutes() + interval);
      }
    };
  };

  secondsSpecHelper = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(interval)</span> {</span>
    <span class="hljs-keyword">return</span> {
      span: interval * <span class="hljs-number">1000</span>,
      start: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(d)</span> {</span>
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(d.getFullYear(), d.getMonth(), d.getDate(), d.getHours(), d.getMinutes());
      },
      fmt: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(d)</span> {</span>
        <span class="hljs-keyword">return</span> <span class="hljs-string">""</span> + (Morris.pad2(d.getHours())) + <span class="hljs-string">":"</span> + (Morris.pad2(d.getMinutes())) + <span class="hljs-string">":"</span> + (Morris.pad2(d.getSeconds()));
      },
      incr: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(d)</span> {</span>
        <span class="hljs-keyword">return</span> d.setUTCSeconds(d.getUTCSeconds() + interval);
      }
    };
  };

  Morris.LABEL_SPECS = {
    <span class="hljs-string">"decade"</span>: {
      span: <span class="hljs-number">172800000000</span>,
      start: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(d)</span> {</span>
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(d.getFullYear() - d.getFullYear() % <span class="hljs-number">10</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>);
      },
      fmt: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(d)</span> {</span>
        <span class="hljs-keyword">return</span> <span class="hljs-string">""</span> + (d.getFullYear());
      },
      incr: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(d)</span> {</span>
        <span class="hljs-keyword">return</span> d.setFullYear(d.getFullYear() + <span class="hljs-number">10</span>);
      }
    },
    <span class="hljs-string">"year"</span>: {
      span: <span class="hljs-number">17280000000</span>,
      start: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(d)</span> {</span>
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(d.getFullYear(), <span class="hljs-number">0</span>, <span class="hljs-number">1</span>);
      },
      fmt: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(d)</span> {</span>
        <span class="hljs-keyword">return</span> <span class="hljs-string">""</span> + (d.getFullYear());
      },
      incr: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(d)</span> {</span>
        <span class="hljs-keyword">return</span> d.setFullYear(d.getFullYear() + <span class="hljs-number">1</span>);
      }
    },
    <span class="hljs-string">"month"</span>: {
      span: <span class="hljs-number">2419200000</span>,
      start: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(d)</span> {</span>
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(d.getFullYear(), d.getMonth(), <span class="hljs-number">1</span>);
      },
      fmt: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(d)</span> {</span>
        <span class="hljs-keyword">return</span> <span class="hljs-string">""</span> + (d.getFullYear()) + <span class="hljs-string">"-"</span> + (Morris.pad2(d.getMonth() + <span class="hljs-number">1</span>));
      },
      incr: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(d)</span> {</span>
        <span class="hljs-keyword">return</span> d.setMonth(d.getMonth() + <span class="hljs-number">1</span>);
      }
    },
    <span class="hljs-string">"week"</span>: {
      span: <span class="hljs-number">604800000</span>,
      start: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(d)</span> {</span>
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(d.getFullYear(), d.getMonth(), d.getDate());
      },
      fmt: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(d)</span> {</span>
        <span class="hljs-keyword">return</span> <span class="hljs-string">""</span> + (d.getFullYear()) + <span class="hljs-string">"-"</span> + (Morris.pad2(d.getMonth() + <span class="hljs-number">1</span>)) + <span class="hljs-string">"-"</span> + (Morris.pad2(d.getDate()));
      },
      incr: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(d)</span> {</span>
        <span class="hljs-keyword">return</span> d.setDate(d.getDate() + <span class="hljs-number">7</span>);
      }
    },
    <span class="hljs-string">"day"</span>: {
      span: <span class="hljs-number">86400000</span>,
      start: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(d)</span> {</span>
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(d.getFullYear(), d.getMonth(), d.getDate());
      },
      fmt: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(d)</span> {</span>
        <span class="hljs-keyword">return</span> <span class="hljs-string">""</span> + (d.getFullYear()) + <span class="hljs-string">"-"</span> + (Morris.pad2(d.getMonth() + <span class="hljs-number">1</span>)) + <span class="hljs-string">"-"</span> + (Morris.pad2(d.getDate()));
      },
      incr: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(d)</span> {</span>
        <span class="hljs-keyword">return</span> d.setDate(d.getDate() + <span class="hljs-number">1</span>);
      }
    },
    <span class="hljs-string">"hour"</span>: minutesSpecHelper(<span class="hljs-number">60</span>),
    <span class="hljs-string">"30min"</span>: minutesSpecHelper(<span class="hljs-number">30</span>),
    <span class="hljs-string">"15min"</span>: minutesSpecHelper(<span class="hljs-number">15</span>),
    <span class="hljs-string">"10min"</span>: minutesSpecHelper(<span class="hljs-number">10</span>),
    <span class="hljs-string">"5min"</span>: minutesSpecHelper(<span class="hljs-number">5</span>),
    <span class="hljs-string">"minute"</span>: minutesSpecHelper(<span class="hljs-number">1</span>),
    <span class="hljs-string">"30sec"</span>: secondsSpecHelper(<span class="hljs-number">30</span>),
    <span class="hljs-string">"15sec"</span>: secondsSpecHelper(<span class="hljs-number">15</span>),
    <span class="hljs-string">"10sec"</span>: secondsSpecHelper(<span class="hljs-number">10</span>),
    <span class="hljs-string">"5sec"</span>: secondsSpecHelper(<span class="hljs-number">5</span>),
    <span class="hljs-string">"second"</span>: secondsSpecHelper(<span class="hljs-number">1</span>)
  };

  Morris.AUTO_LABEL_ORDER = [<span class="hljs-string">"decade"</span>, <span class="hljs-string">"year"</span>, <span class="hljs-string">"month"</span>, <span class="hljs-string">"week"</span>, <span class="hljs-string">"day"</span>, <span class="hljs-string">"hour"</span>, <span class="hljs-string">"30min"</span>, <span class="hljs-string">"15min"</span>, <span class="hljs-string">"10min"</span>, <span class="hljs-string">"5min"</span>, <span class="hljs-string">"minute"</span>, <span class="hljs-string">"30sec"</span>, <span class="hljs-string">"15sec"</span>, <span class="hljs-string">"10sec"</span>, <span class="hljs-string">"5sec"</span>, <span class="hljs-string">"second"</span>];

  Morris.Area = (<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(_super)</span> {</span>
    <span class="hljs-keyword">var</span> areaDefaults;

    __extends(Area, _super);

    areaDefaults = {
      fillOpacity: <span class="hljs-string">'auto'</span>,
      behaveLikeLine: <span class="hljs-literal">false</span>
    };

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Area</span><span class="hljs-params">(options)</span> {</span>
      <span class="hljs-keyword">var</span> areaOptions;
      <span class="hljs-keyword">if</span> (!(<span class="hljs-keyword">this</span> <span class="hljs-keyword">instanceof</span> Morris.Area)) {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Morris.Area(options);
      }
      areaOptions = $.extend({}, areaDefaults, options);
      <span class="hljs-keyword">this</span>.cumulative = !areaOptions.behaveLikeLine;
      <span class="hljs-keyword">if</span> (areaOptions.fillOpacity === <span class="hljs-string">'auto'</span>) {
        areaOptions.fillOpacity = areaOptions.behaveLikeLine ? <span class="hljs-number">.8</span> : <span class="hljs-number">1</span>;
      }
      Area.__super__.constructor.call(<span class="hljs-keyword">this</span>, areaOptions);
    }

    Area.prototype.calcPoints = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
      <span class="hljs-keyword">var</span> row, total, y, _i, _len, _ref, _results;
      _ref = <span class="hljs-keyword">this</span>.data;
      _results = [];
      <span class="hljs-keyword">for</span> (_i = <span class="hljs-number">0</span>, _len = _ref.length; _i &lt; _len; _i++) {
        row = _ref[_i];
        row._x = <span class="hljs-keyword">this</span>.transX(row.x);
        total = <span class="hljs-number">0</span>;
        row._y = (<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
          <span class="hljs-keyword">var</span> _j, _len1, _ref1, _results1;
          _ref1 = row.y;
          _results1 = [];
          <span class="hljs-keyword">for</span> (_j = <span class="hljs-number">0</span>, _len1 = _ref1.length; _j &lt; _len1; _j++) {
            y = _ref1[_j];
            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.options.behaveLikeLine) {
              _results1.push(<span class="hljs-keyword">this</span>.transY(y));
            } <span class="hljs-keyword">else</span> {
              total += y || <span class="hljs-number">0</span>;
              _results1.push(<span class="hljs-keyword">this</span>.transY(total));
            }
          }
          <span class="hljs-keyword">return</span> _results1;
        }).call(<span class="hljs-keyword">this</span>);
        _results.push(row._ymax = <span class="hljs-built_in">Math</span>.max.apply(<span class="hljs-built_in">Math</span>, row._y));
      }
      <span class="hljs-keyword">return</span> _results;
    };

    Area.prototype.drawSeries = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
      <span class="hljs-keyword">var</span> i, range, _i, _j, _k, _len, _ref, _ref1, _results, _results1, _results2;
      <span class="hljs-keyword">this</span>.seriesPoints = [];
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.options.behaveLikeLine) {
        range = (<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
          _results = [];
          <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> _i = <span class="hljs-number">0</span>, _ref = <span class="hljs-keyword">this</span>.options.ykeys.length - <span class="hljs-number">1</span>; <span class="hljs-number">0</span> &lt;= _ref ? _i &lt;= _ref : _i &gt;= _ref; <span class="hljs-number">0</span> &lt;= _ref ? _i++ : _i--){ _results.push(_i); }
          <span class="hljs-keyword">return</span> _results;
        }).apply(<span class="hljs-keyword">this</span>);
      } <span class="hljs-keyword">else</span> {
        range = (<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
          _results1 = [];
          <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> _j = _ref1 = <span class="hljs-keyword">this</span>.options.ykeys.length - <span class="hljs-number">1</span>; _ref1 &lt;= <span class="hljs-number">0</span> ? _j &lt;= <span class="hljs-number">0</span> : _j &gt;= <span class="hljs-number">0</span>; _ref1 &lt;= <span class="hljs-number">0</span> ? _j++ : _j--){ _results1.push(_j); }
          <span class="hljs-keyword">return</span> _results1;
        }).apply(<span class="hljs-keyword">this</span>);
      }
      _results2 = [];
      <span class="hljs-keyword">for</span> (_k = <span class="hljs-number">0</span>, _len = range.length; _k &lt; _len; _k++) {
        i = range[_k];
        <span class="hljs-keyword">this</span>._drawFillFor(i);
        <span class="hljs-keyword">this</span>._drawLineFor(i);
        _results2.push(<span class="hljs-keyword">this</span>._drawPointFor(i));
      }
      <span class="hljs-keyword">return</span> _results2;
    };

    Area.prototype._drawFillFor = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(index)</span> {</span>
      <span class="hljs-keyword">var</span> path;
      path = <span class="hljs-keyword">this</span>.paths[index];
      <span class="hljs-keyword">if</span> (path !== <span class="hljs-literal">null</span>) {
        path = path + (<span class="hljs-string">"L"</span> + (<span class="hljs-keyword">this</span>.transX(<span class="hljs-keyword">this</span>.xmax)) + <span class="hljs-string">","</span> + <span class="hljs-keyword">this</span>.bottom + <span class="hljs-string">"L"</span> + (<span class="hljs-keyword">this</span>.transX(<span class="hljs-keyword">this</span>.xmin)) + <span class="hljs-string">","</span> + <span class="hljs-keyword">this</span>.bottom + <span class="hljs-string">"Z"</span>);
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.drawFilledPath(path, <span class="hljs-keyword">this</span>.fillForSeries(index));
      }
    };

    Area.prototype.fillForSeries = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(i)</span> {</span>
      <span class="hljs-keyword">var</span> color;
      color = Raphael.rgb2hsl(<span class="hljs-keyword">this</span>.colorFor(<span class="hljs-keyword">this</span>.data[i], i, <span class="hljs-string">'line'</span>));
      <span class="hljs-keyword">return</span> Raphael.hsl(color.h, <span class="hljs-keyword">this</span>.options.behaveLikeLine ? color.s * <span class="hljs-number">0.9</span> : color.s * <span class="hljs-number">0.75</span>, <span class="hljs-built_in">Math</span>.min(<span class="hljs-number">0.98</span>, <span class="hljs-keyword">this</span>.options.behaveLikeLine ? color.l * <span class="hljs-number">1.2</span> : color.l * <span class="hljs-number">1.25</span>));
    };

    Area.prototype.drawFilledPath = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(path, fill)</span> {</span>
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.raphael.path(path).attr(<span class="hljs-string">'fill'</span>, fill).attr(<span class="hljs-string">'fill-opacity'</span>, <span class="hljs-keyword">this</span>.options.fillOpacity).attr(<span class="hljs-string">'stroke'</span>, <span class="hljs-string">'none'</span>);
    };

    <span class="hljs-keyword">return</span> Area;

  })(Morris.Line);

  Morris.Bar = (<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(_super)</span> {</span>
    __extends(Bar, _super);

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Bar</span><span class="hljs-params">(options)</span> {</span>
      <span class="hljs-keyword">this</span>.onHoverOut = __bind(<span class="hljs-keyword">this</span>.onHoverOut, <span class="hljs-keyword">this</span>);
      <span class="hljs-keyword">this</span>.onHoverMove = __bind(<span class="hljs-keyword">this</span>.onHoverMove, <span class="hljs-keyword">this</span>);
      <span class="hljs-keyword">this</span>.onGridClick = __bind(<span class="hljs-keyword">this</span>.onGridClick, <span class="hljs-keyword">this</span>);
      <span class="hljs-keyword">if</span> (!(<span class="hljs-keyword">this</span> <span class="hljs-keyword">instanceof</span> Morris.Bar)) {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Morris.Bar(options);
      }
      Bar.__super__.constructor.call(<span class="hljs-keyword">this</span>, $.extend({}, options, {
        parseTime: <span class="hljs-literal">false</span>
      }));
    }

    Bar.prototype.init = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
      <span class="hljs-keyword">this</span>.cumulative = <span class="hljs-keyword">this</span>.options.stacked;
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.options.hideHover !== <span class="hljs-string">'always'</span>) {
        <span class="hljs-keyword">this</span>.hover = <span class="hljs-keyword">new</span> Morris.Hover({
          parent: <span class="hljs-keyword">this</span>.el
        });
        <span class="hljs-keyword">this</span>.on(<span class="hljs-string">'hovermove'</span>, <span class="hljs-keyword">this</span>.onHoverMove);
        <span class="hljs-keyword">this</span>.on(<span class="hljs-string">'hoverout'</span>, <span class="hljs-keyword">this</span>.onHoverOut);
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.on(<span class="hljs-string">'gridclick'</span>, <span class="hljs-keyword">this</span>.onGridClick);
      }
    };

    Bar.prototype.defaults = {
      barSizeRatio: <span class="hljs-number">0.75</span>,
      barGap: <span class="hljs-number">3</span>,
      barColors: [<span class="hljs-string">'#0b62a4'</span>, <span class="hljs-string">'#7a92a3'</span>, <span class="hljs-string">'#4da74d'</span>, <span class="hljs-string">'#afd8f8'</span>, <span class="hljs-string">'#edc240'</span>, <span class="hljs-string">'#cb4b4b'</span>, <span class="hljs-string">'#9440ed'</span>],
      barOpacity: <span class="hljs-number">1.0</span>,
      barRadius: [<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>],
      xLabelMargin: <span class="hljs-number">50</span>
    };

    Bar.prototype.calc = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
      <span class="hljs-keyword">var</span> _ref;
      <span class="hljs-keyword">this</span>.calcBars();
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.options.hideHover === <span class="hljs-literal">false</span>) {
        <span class="hljs-keyword">return</span> (_ref = <span class="hljs-keyword">this</span>.hover).update.apply(_ref, <span class="hljs-keyword">this</span>.hoverContentForRow(<span class="hljs-keyword">this</span>.data.length - <span class="hljs-number">1</span>));
      }
    };

    Bar.prototype.calcBars = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
      <span class="hljs-keyword">var</span> idx, row, y, _i, _len, _ref, _results;
      _ref = <span class="hljs-keyword">this</span>.data;
      _results = [];
      <span class="hljs-keyword">for</span> (idx = _i = <span class="hljs-number">0</span>, _len = _ref.length; _i &lt; _len; idx = ++_i) {
        row = _ref[idx];
        row._x = <span class="hljs-keyword">this</span>.left + <span class="hljs-keyword">this</span>.width * (idx + <span class="hljs-number">0.5</span>) / <span class="hljs-keyword">this</span>.data.length;
        _results.push(row._y = (<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
          <span class="hljs-keyword">var</span> _j, _len1, _ref1, _results1;
          _ref1 = row.y;
          _results1 = [];
          <span class="hljs-keyword">for</span> (_j = <span class="hljs-number">0</span>, _len1 = _ref1.length; _j &lt; _len1; _j++) {
            y = _ref1[_j];
            <span class="hljs-keyword">if</span> (y != <span class="hljs-literal">null</span>) {
              _results1.push(<span class="hljs-keyword">this</span>.transY(y));
            } <span class="hljs-keyword">else</span> {
              _results1.push(<span class="hljs-literal">null</span>);
            }
          }
          <span class="hljs-keyword">return</span> _results1;
        }).call(<span class="hljs-keyword">this</span>));
      }
      <span class="hljs-keyword">return</span> _results;
    };

    Bar.prototype.draw = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
      <span class="hljs-keyword">var</span> _ref;
      <span class="hljs-keyword">if</span> ((_ref = <span class="hljs-keyword">this</span>.options.axes) === <span class="hljs-literal">true</span> || _ref === <span class="hljs-string">'both'</span> || _ref === <span class="hljs-string">'x'</span>) {
        <span class="hljs-keyword">this</span>.drawXAxis();
      }
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.drawSeries();
    };

    Bar.prototype.drawXAxis = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
      <span class="hljs-keyword">var</span> i, label, labelBox, margin, offset, prevAngleMargin, prevLabelMargin, row, textBox, ypos, _i, _ref, _results;
      ypos = <span class="hljs-keyword">this</span>.bottom + (<span class="hljs-keyword">this</span>.options.xAxisLabelTopPadding || <span class="hljs-keyword">this</span>.options.padding / <span class="hljs-number">2</span>);
      prevLabelMargin = <span class="hljs-literal">null</span>;
      prevAngleMargin = <span class="hljs-literal">null</span>;
      _results = [];
      <span class="hljs-keyword">for</span> (i = _i = <span class="hljs-number">0</span>, _ref = <span class="hljs-keyword">this</span>.data.length; <span class="hljs-number">0</span> &lt;= _ref ? _i &lt; _ref : _i &gt; _ref; i = <span class="hljs-number">0</span> &lt;= _ref ? ++_i : --_i) {
        row = <span class="hljs-keyword">this</span>.data[<span class="hljs-keyword">this</span>.data.length - <span class="hljs-number">1</span> - i];
        label = <span class="hljs-keyword">this</span>.drawXAxisLabel(row._x, ypos, row.label);
        textBox = label.getBBox();
        label.transform(<span class="hljs-string">"r"</span> + (-<span class="hljs-keyword">this</span>.options.xLabelAngle));
        labelBox = label.getBBox();
        label.transform(<span class="hljs-string">"t0,"</span> + (labelBox.height / <span class="hljs-number">2</span>) + <span class="hljs-string">"..."</span>);
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.options.xLabelAngle !== <span class="hljs-number">0</span>) {
          offset = -<span class="hljs-number">0.5</span> * textBox.width * <span class="hljs-built_in">Math</span>.cos(<span class="hljs-keyword">this</span>.options.xLabelAngle * <span class="hljs-built_in">Math</span>.PI / <span class="hljs-number">180.0</span>);
          label.transform(<span class="hljs-string">"t"</span> + offset + <span class="hljs-string">",0..."</span>);
        }
        <span class="hljs-keyword">if</span> (((prevLabelMargin == <span class="hljs-literal">null</span>) || prevLabelMargin &gt;= labelBox.x + labelBox.width || (prevAngleMargin != <span class="hljs-literal">null</span>) &amp;&amp; prevAngleMargin &gt;= labelBox.x) &amp;&amp; labelBox.x &gt;= <span class="hljs-number">0</span> &amp;&amp; (labelBox.x + labelBox.width) &lt; <span class="hljs-keyword">this</span>.el.width()) {
          <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.options.xLabelAngle !== <span class="hljs-number">0</span>) {
            margin = <span class="hljs-number">1.25</span> * <span class="hljs-keyword">this</span>.options.gridTextSize / <span class="hljs-built_in">Math</span>.sin(<span class="hljs-keyword">this</span>.options.xLabelAngle * <span class="hljs-built_in">Math</span>.PI / <span class="hljs-number">180.0</span>);
            prevAngleMargin = labelBox.x - margin;
          }
          _results.push(prevLabelMargin = labelBox.x - <span class="hljs-keyword">this</span>.options.xLabelMargin);
        } <span class="hljs-keyword">else</span> {
          _results.push(label.remove());
        }
      }
      <span class="hljs-keyword">return</span> _results;
    };

    Bar.prototype.drawSeries = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
      <span class="hljs-keyword">var</span> barWidth, bottom, groupWidth, idx, lastTop, left, leftPadding, numBars, row, sidx, size, top, ypos, zeroPos;
      groupWidth = <span class="hljs-keyword">this</span>.width / <span class="hljs-keyword">this</span>.options.data.length;
      numBars = <span class="hljs-keyword">this</span>.options.stacked != <span class="hljs-literal">null</span> ? <span class="hljs-number">1</span> : <span class="hljs-keyword">this</span>.options.ykeys.length;
      barWidth = (groupWidth * <span class="hljs-keyword">this</span>.options.barSizeRatio - <span class="hljs-keyword">this</span>.options.barGap * (numBars - <span class="hljs-number">1</span>)) / numBars;
      leftPadding = groupWidth * (<span class="hljs-number">1</span> - <span class="hljs-keyword">this</span>.options.barSizeRatio) / <span class="hljs-number">2</span>;
      zeroPos = <span class="hljs-keyword">this</span>.ymin &lt;= <span class="hljs-number">0</span> &amp;&amp; <span class="hljs-keyword">this</span>.ymax &gt;= <span class="hljs-number">0</span> ? <span class="hljs-keyword">this</span>.transY(<span class="hljs-number">0</span>) : <span class="hljs-literal">null</span>;
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.bars = (<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
        <span class="hljs-keyword">var</span> _i, _len, _ref, _results;
        _ref = <span class="hljs-keyword">this</span>.data;
        _results = [];
        <span class="hljs-keyword">for</span> (idx = _i = <span class="hljs-number">0</span>, _len = _ref.length; _i &lt; _len; idx = ++_i) {
          row = _ref[idx];
          lastTop = <span class="hljs-number">0</span>;
          _results.push((<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
            <span class="hljs-keyword">var</span> _j, _len1, _ref1, _results1;
            _ref1 = row._y;
            _results1 = [];
            <span class="hljs-keyword">for</span> (sidx = _j = <span class="hljs-number">0</span>, _len1 = _ref1.length; _j &lt; _len1; sidx = ++_j) {
              ypos = _ref1[sidx];
              <span class="hljs-keyword">if</span> (ypos !== <span class="hljs-literal">null</span>) {
                <span class="hljs-keyword">if</span> (zeroPos) {
                  top = <span class="hljs-built_in">Math</span>.min(ypos, zeroPos);
                  bottom = <span class="hljs-built_in">Math</span>.max(ypos, zeroPos);
                } <span class="hljs-keyword">else</span> {
                  top = ypos;
                  bottom = <span class="hljs-keyword">this</span>.bottom;
                }
                left = <span class="hljs-keyword">this</span>.left + idx * groupWidth + leftPadding;
                <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.options.stacked) {
                  left += sidx * (barWidth + <span class="hljs-keyword">this</span>.options.barGap);
                }
                size = bottom - top;
                <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.options.stacked) {
                  top -= lastTop;
                }
                <span class="hljs-keyword">this</span>.drawBar(left, top, barWidth, size, <span class="hljs-keyword">this</span>.colorFor(row, sidx, <span class="hljs-string">'bar'</span>), <span class="hljs-keyword">this</span>.options.barOpacity, <span class="hljs-keyword">this</span>.options.barRadius);
                _results1.push(lastTop += size);
              } <span class="hljs-keyword">else</span> {
                _results1.push(<span class="hljs-literal">null</span>);
              }
            }
            <span class="hljs-keyword">return</span> _results1;
          }).call(<span class="hljs-keyword">this</span>));
        }
        <span class="hljs-keyword">return</span> _results;
      }).call(<span class="hljs-keyword">this</span>);
    };

    Bar.prototype.colorFor = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(row, sidx, type)</span> {</span>
      <span class="hljs-keyword">var</span> r, s;
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-keyword">this</span>.options.barColors === <span class="hljs-string">'function'</span>) {
        r = {
          x: row.x,
          y: row.y[sidx],
          label: row.label
        };
        s = {
          index: sidx,
          key: <span class="hljs-keyword">this</span>.options.ykeys[sidx],
          label: <span class="hljs-keyword">this</span>.options.labels[sidx]
        };
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.options.barColors.call(<span class="hljs-keyword">this</span>, r, s, type);
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.options.barColors[sidx % <span class="hljs-keyword">this</span>.options.barColors.length];
      }
    };

    Bar.prototype.hitTest = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(x)</span> {</span>
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.data.length === <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
      }
      x = <span class="hljs-built_in">Math</span>.max(<span class="hljs-built_in">Math</span>.min(x, <span class="hljs-keyword">this</span>.right), <span class="hljs-keyword">this</span>.left);
      <span class="hljs-keyword">return</span> <span class="hljs-built_in">Math</span>.min(<span class="hljs-keyword">this</span>.data.length - <span class="hljs-number">1</span>, <span class="hljs-built_in">Math</span>.floor((x - <span class="hljs-keyword">this</span>.left) / (<span class="hljs-keyword">this</span>.width / <span class="hljs-keyword">this</span>.data.length)));
    };

    Bar.prototype.onGridClick = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(x, y)</span> {</span>
      <span class="hljs-keyword">var</span> index;
      index = <span class="hljs-keyword">this</span>.hitTest(x);
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.fire(<span class="hljs-string">'click'</span>, index, <span class="hljs-keyword">this</span>.data[index].src, x, y);
    };

    Bar.prototype.onHoverMove = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(x, y)</span> {</span>
      <span class="hljs-keyword">var</span> index, _ref;
      index = <span class="hljs-keyword">this</span>.hitTest(x);
      <span class="hljs-keyword">return</span> (_ref = <span class="hljs-keyword">this</span>.hover).update.apply(_ref, <span class="hljs-keyword">this</span>.hoverContentForRow(index));
    };

    Bar.prototype.onHoverOut = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.options.hideHover !== <span class="hljs-literal">false</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.hover.hide();
      }
    };

    Bar.prototype.hoverContentForRow = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(index)</span> {</span>
      <span class="hljs-keyword">var</span> content, j, row, x, y, _i, _len, _ref;
      row = <span class="hljs-keyword">this</span>.data[index];
      content = <span class="hljs-string">"&lt;div class='morris-hover-row-label'&gt;"</span> + row.label + <span class="hljs-string">"&lt;/div&gt;"</span>;
      _ref = row.y;
      <span class="hljs-keyword">for</span> (j = _i = <span class="hljs-number">0</span>, _len = _ref.length; _i &lt; _len; j = ++_i) {
        y = _ref[j];
        content += <span class="hljs-string">"&lt;div class='morris-hover-point' style='color: "</span> + (<span class="hljs-keyword">this</span>.colorFor(row, j, <span class="hljs-string">'label'</span>)) + <span class="hljs-string">"'&gt;\n  "</span> + <span class="hljs-keyword">this</span>.options.labels[j] + <span class="hljs-string">":\n  "</span> + (<span class="hljs-keyword">this</span>.yLabelFormat(y)) + <span class="hljs-string">"\n&lt;/div&gt;"</span>;
      }
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-keyword">this</span>.options.hoverCallback === <span class="hljs-string">'function'</span>) {
        content = <span class="hljs-keyword">this</span>.options.hoverCallback(index, <span class="hljs-keyword">this</span>.options, content, row.src);
      }
      x = <span class="hljs-keyword">this</span>.left + (index + <span class="hljs-number">0.5</span>) * <span class="hljs-keyword">this</span>.width / <span class="hljs-keyword">this</span>.data.length;
      <span class="hljs-keyword">return</span> [content, x];
    };

    Bar.prototype.drawXAxisLabel = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(xPos, yPos, text)</span> {</span>
      <span class="hljs-keyword">var</span> label;
      <span class="hljs-keyword">return</span> label = <span class="hljs-keyword">this</span>.raphael.text(xPos, yPos, text).attr(<span class="hljs-string">'font-size'</span>, <span class="hljs-keyword">this</span>.options.gridTextSize).attr(<span class="hljs-string">'font-family'</span>, <span class="hljs-keyword">this</span>.options.gridTextFamily).attr(<span class="hljs-string">'font-weight'</span>, <span class="hljs-keyword">this</span>.options.gridTextWeight).attr(<span class="hljs-string">'fill'</span>, <span class="hljs-keyword">this</span>.options.gridTextColor);
    };

    Bar.prototype.drawBar = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(xPos, yPos, width, height, barColor, opacity, radiusArray)</span> {</span>
      <span class="hljs-keyword">var</span> maxRadius, path;
      maxRadius = <span class="hljs-built_in">Math</span>.max.apply(<span class="hljs-built_in">Math</span>, radiusArray);
      <span class="hljs-keyword">if</span> (maxRadius === <span class="hljs-number">0</span> || maxRadius &gt; height) {
        path = <span class="hljs-keyword">this</span>.raphael.rect(xPos, yPos, width, height);
      } <span class="hljs-keyword">else</span> {
        path = <span class="hljs-keyword">this</span>.raphael.path(<span class="hljs-keyword">this</span>.roundedRect(xPos, yPos, width, height, radiusArray));
      }
      <span class="hljs-keyword">return</span> path.attr(<span class="hljs-string">'fill'</span>, barColor).attr(<span class="hljs-string">'fill-opacity'</span>, opacity).attr(<span class="hljs-string">'stroke'</span>, <span class="hljs-string">'none'</span>);
    };

    Bar.prototype.roundedRect = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(x, y, w, h, r)</span> {</span>
      <span class="hljs-keyword">if</span> (r == <span class="hljs-literal">null</span>) {
        r = [<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>];
      }
      <span class="hljs-keyword">return</span> [<span class="hljs-string">"M"</span>, x, r[<span class="hljs-number">0</span>] + y, <span class="hljs-string">"Q"</span>, x, y, x + r[<span class="hljs-number">0</span>], y, <span class="hljs-string">"L"</span>, x + w - r[<span class="hljs-number">1</span>], y, <span class="hljs-string">"Q"</span>, x + w, y, x + w, y + r[<span class="hljs-number">1</span>], <span class="hljs-string">"L"</span>, x + w, y + h - r[<span class="hljs-number">2</span>], <span class="hljs-string">"Q"</span>, x + w, y + h, x + w - r[<span class="hljs-number">2</span>], y + h, <span class="hljs-string">"L"</span>, x + r[<span class="hljs-number">3</span>], y + h, <span class="hljs-string">"Q"</span>, x, y + h, x, y + h - r[<span class="hljs-number">3</span>], <span class="hljs-string">"Z"</span>];
    };

    <span class="hljs-keyword">return</span> Bar;

  })(Morris.Grid);

  Morris.Donut = (<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(_super)</span> {</span>
    __extends(Donut, _super);

    Donut.prototype.defaults = {
      colors: [<span class="hljs-string">'#0B62A4'</span>, <span class="hljs-string">'#3980B5'</span>, <span class="hljs-string">'#679DC6'</span>, <span class="hljs-string">'#95BBD7'</span>, <span class="hljs-string">'#B0CCE1'</span>, <span class="hljs-string">'#095791'</span>, <span class="hljs-string">'#095085'</span>, <span class="hljs-string">'#083E67'</span>, <span class="hljs-string">'#052C48'</span>, <span class="hljs-string">'#042135'</span>],
      backgroundColor: <span class="hljs-string">'#FFFFFF'</span>,
      labelColor: <span class="hljs-string">'#000000'</span>,
      formatter: Morris.commas,
      resize: <span class="hljs-literal">false</span>
    };

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Donut</span><span class="hljs-params">(options)</span> {</span>
      <span class="hljs-keyword">this</span>.resizeHandler = __bind(<span class="hljs-keyword">this</span>.resizeHandler, <span class="hljs-keyword">this</span>);
      <span class="hljs-keyword">this</span>.select = __bind(<span class="hljs-keyword">this</span>.select, <span class="hljs-keyword">this</span>);
      <span class="hljs-keyword">this</span>.click = __bind(<span class="hljs-keyword">this</span>.click, <span class="hljs-keyword">this</span>);
      <span class="hljs-keyword">var</span> _this = <span class="hljs-keyword">this</span>;
      <span class="hljs-keyword">if</span> (!(<span class="hljs-keyword">this</span> <span class="hljs-keyword">instanceof</span> Morris.Donut)) {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Morris.Donut(options);
      }
      <span class="hljs-keyword">this</span>.options = $.extend({}, <span class="hljs-keyword">this</span>.defaults, options);
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> options.element === <span class="hljs-string">'string'</span>) {
        <span class="hljs-keyword">this</span>.el = $(document.getElementById(options.element));
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">this</span>.el = $(options.element);
      }
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.el === <span class="hljs-literal">null</span> || <span class="hljs-keyword">this</span>.el.length === <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">"Graph placeholder not found."</span>);
      }
      <span class="hljs-keyword">if</span> (options.data === <span class="hljs-keyword">void</span> <span class="hljs-number">0</span> || options.data.length === <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">return</span>;
      }
      <span class="hljs-keyword">this</span>.raphael = <span class="hljs-keyword">new</span> Raphael(<span class="hljs-keyword">this</span>.el[<span class="hljs-number">0</span>]);
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.options.resize) {
        $(window).bind(<span class="hljs-string">'resize'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(evt)</span> {</span>
          <span class="hljs-keyword">if</span> (_this.timeoutId != <span class="hljs-literal">null</span>) {
            window.clearTimeout(_this.timeoutId);
          }
          <span class="hljs-keyword">return</span> _this.timeoutId = window.setTimeout(_this.resizeHandler, <span class="hljs-number">100</span>);
        });
      }
      <span class="hljs-keyword">this</span>.setData(options.data);
    }

    Donut.prototype.redraw = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
      <span class="hljs-keyword">var</span> C, cx, cy, i, idx, last, max_value, min, next, seg, total, value, w, _i, _j, _k, _len, _len1, _len2, _ref, _ref1, _ref2, _results;
      <span class="hljs-keyword">this</span>.raphael.clear();
      cx = <span class="hljs-keyword">this</span>.el.width() / <span class="hljs-number">2</span>;
      cy = <span class="hljs-keyword">this</span>.el.height() / <span class="hljs-number">2</span>;
      w = (<span class="hljs-built_in">Math</span>.min(cx, cy) - <span class="hljs-number">10</span>) / <span class="hljs-number">3</span>;
      total = <span class="hljs-number">0</span>;
      _ref = <span class="hljs-keyword">this</span>.values;
      <span class="hljs-keyword">for</span> (_i = <span class="hljs-number">0</span>, _len = _ref.length; _i &lt; _len; _i++) {
        value = _ref[_i];
        total += value;
      }
      min = <span class="hljs-number">5</span> / (<span class="hljs-number">2</span> * w);
      C = <span class="hljs-number">1.9999</span> * <span class="hljs-built_in">Math</span>.PI - min * <span class="hljs-keyword">this</span>.data.length;
      last = <span class="hljs-number">0</span>;
      idx = <span class="hljs-number">0</span>;
      <span class="hljs-keyword">this</span>.segments = [];
      _ref1 = <span class="hljs-keyword">this</span>.values;
      <span class="hljs-keyword">for</span> (i = _j = <span class="hljs-number">0</span>, _len1 = _ref1.length; _j &lt; _len1; i = ++_j) {
        value = _ref1[i];
        next = last + min + C * (value / total);
        seg = <span class="hljs-keyword">new</span> Morris.DonutSegment(cx, cy, w * <span class="hljs-number">2</span>, w, last, next, <span class="hljs-keyword">this</span>.data[i].color || <span class="hljs-keyword">this</span>.options.colors[idx % <span class="hljs-keyword">this</span>.options.colors.length], <span class="hljs-keyword">this</span>.options.backgroundColor, idx, <span class="hljs-keyword">this</span>.raphael);
        seg.render();
        <span class="hljs-keyword">this</span>.segments.push(seg);
        seg.on(<span class="hljs-string">'hover'</span>, <span class="hljs-keyword">this</span>.select);
        seg.on(<span class="hljs-string">'click'</span>, <span class="hljs-keyword">this</span>.click);
        last = next;
        idx += <span class="hljs-number">1</span>;
      }
      <span class="hljs-keyword">this</span>.text1 = <span class="hljs-keyword">this</span>.drawEmptyDonutLabel(cx, cy - <span class="hljs-number">10</span>, <span class="hljs-keyword">this</span>.options.labelColor, <span class="hljs-number">15</span>, <span class="hljs-number">800</span>);
      <span class="hljs-keyword">this</span>.text2 = <span class="hljs-keyword">this</span>.drawEmptyDonutLabel(cx, cy + <span class="hljs-number">10</span>, <span class="hljs-keyword">this</span>.options.labelColor, <span class="hljs-number">14</span>);
      max_value = <span class="hljs-built_in">Math</span>.max.apply(<span class="hljs-built_in">Math</span>, <span class="hljs-keyword">this</span>.values);
      idx = <span class="hljs-number">0</span>;
      _ref2 = <span class="hljs-keyword">this</span>.values;
      _results = [];
      <span class="hljs-keyword">for</span> (_k = <span class="hljs-number">0</span>, _len2 = _ref2.length; _k &lt; _len2; _k++) {
        value = _ref2[_k];
        <span class="hljs-keyword">if</span> (value === max_value) {
          <span class="hljs-keyword">this</span>.select(idx);
          <span class="hljs-keyword">break</span>;
        }
        _results.push(idx += <span class="hljs-number">1</span>);
      }
      <span class="hljs-keyword">return</span> _results;
    };

    Donut.prototype.setData = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(data)</span> {</span>
      <span class="hljs-keyword">var</span> row;
      <span class="hljs-keyword">this</span>.data = data;
      <span class="hljs-keyword">this</span>.values = (<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
        <span class="hljs-keyword">var</span> _i, _len, _ref, _results;
        _ref = <span class="hljs-keyword">this</span>.data;
        _results = [];
        <span class="hljs-keyword">for</span> (_i = <span class="hljs-number">0</span>, _len = _ref.length; _i &lt; _len; _i++) {
          row = _ref[_i];
          _results.push(<span class="hljs-built_in">parseFloat</span>(row.value));
        }
        <span class="hljs-keyword">return</span> _results;
      }).call(<span class="hljs-keyword">this</span>);
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.redraw();
    };

    Donut.prototype.click = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(idx)</span> {</span>
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.fire(<span class="hljs-string">'click'</span>, idx, <span class="hljs-keyword">this</span>.data[idx]);
    };

    Donut.prototype.select = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(idx)</span> {</span>
      <span class="hljs-keyword">var</span> row, s, segment, _i, _len, _ref;
      _ref = <span class="hljs-keyword">this</span>.segments;
      <span class="hljs-keyword">for</span> (_i = <span class="hljs-number">0</span>, _len = _ref.length; _i &lt; _len; _i++) {
        s = _ref[_i];
        s.deselect();
      }
      segment = <span class="hljs-keyword">this</span>.segments[idx];
      segment.select();
      row = <span class="hljs-keyword">this</span>.data[idx];
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.setLabels(row.label, <span class="hljs-keyword">this</span>.options.formatter(row.value, row));
    };

    Donut.prototype.setLabels = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(label1, label2)</span> {</span>
      <span class="hljs-keyword">var</span> inner, maxHeightBottom, maxHeightTop, maxWidth, text1bbox, text1scale, text2bbox, text2scale;
      inner = (<span class="hljs-built_in">Math</span>.min(<span class="hljs-keyword">this</span>.el.width() / <span class="hljs-number">2</span>, <span class="hljs-keyword">this</span>.el.height() / <span class="hljs-number">2</span>) - <span class="hljs-number">10</span>) * <span class="hljs-number">2</span> / <span class="hljs-number">3</span>;
      maxWidth = <span class="hljs-number">1.8</span> * inner;
      maxHeightTop = inner / <span class="hljs-number">2</span>;
      maxHeightBottom = inner / <span class="hljs-number">3</span>;
      <span class="hljs-keyword">this</span>.text1.attr({
        text: label1,
        transform: <span class="hljs-string">''</span>
      });
      text1bbox = <span class="hljs-keyword">this</span>.text1.getBBox();
      text1scale = <span class="hljs-built_in">Math</span>.min(maxWidth / text1bbox.width, maxHeightTop / text1bbox.height);
      <span class="hljs-keyword">this</span>.text1.attr({
        transform: <span class="hljs-string">"S"</span> + text1scale + <span class="hljs-string">","</span> + text1scale + <span class="hljs-string">","</span> + (text1bbox.x + text1bbox.width / <span class="hljs-number">2</span>) + <span class="hljs-string">","</span> + (text1bbox.y + text1bbox.height)
      });
      <span class="hljs-keyword">this</span>.text2.attr({
        text: label2,
        transform: <span class="hljs-string">''</span>
      });
      text2bbox = <span class="hljs-keyword">this</span>.text2.getBBox();
      text2scale = <span class="hljs-built_in">Math</span>.min(maxWidth / text2bbox.width, maxHeightBottom / text2bbox.height);
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.text2.attr({
        transform: <span class="hljs-string">"S"</span> + text2scale + <span class="hljs-string">","</span> + text2scale + <span class="hljs-string">","</span> + (text2bbox.x + text2bbox.width / <span class="hljs-number">2</span>) + <span class="hljs-string">","</span> + text2bbox.y
      });
    };

    Donut.prototype.drawEmptyDonutLabel = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(xPos, yPos, color, fontSize, fontWeight)</span> {</span>
      <span class="hljs-keyword">var</span> text;
      text = <span class="hljs-keyword">this</span>.raphael.text(xPos, yPos, <span class="hljs-string">''</span>).attr(<span class="hljs-string">'font-size'</span>, fontSize).attr(<span class="hljs-string">'fill'</span>, color);
      <span class="hljs-keyword">if</span> (fontWeight != <span class="hljs-literal">null</span>) {
        text.attr(<span class="hljs-string">'font-weight'</span>, fontWeight);
      }
      <span class="hljs-keyword">return</span> text;
    };

    Donut.prototype.resizeHandler = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
      <span class="hljs-keyword">this</span>.timeoutId = <span class="hljs-literal">null</span>;
      <span class="hljs-keyword">this</span>.raphael.setSize(<span class="hljs-keyword">this</span>.el.width(), <span class="hljs-keyword">this</span>.el.height());
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.redraw();
    };

    <span class="hljs-keyword">return</span> Donut;

  })(Morris.EventEmitter);

  Morris.DonutSegment = (<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(_super)</span> {</span>
    __extends(DonutSegment, _super);

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">DonutSegment</span><span class="hljs-params">(cx, cy, inner, outer, p0, p1, color, backgroundColor, index, raphael)</span> {</span>
      <span class="hljs-keyword">this</span>.cx = cx;
      <span class="hljs-keyword">this</span>.cy = cy;
      <span class="hljs-keyword">this</span>.inner = inner;
      <span class="hljs-keyword">this</span>.outer = outer;
      <span class="hljs-keyword">this</span>.color = color;
      <span class="hljs-keyword">this</span>.backgroundColor = backgroundColor;
      <span class="hljs-keyword">this</span>.index = index;
      <span class="hljs-keyword">this</span>.raphael = raphael;
      <span class="hljs-keyword">this</span>.deselect = __bind(<span class="hljs-keyword">this</span>.deselect, <span class="hljs-keyword">this</span>);
      <span class="hljs-keyword">this</span>.select = __bind(<span class="hljs-keyword">this</span>.select, <span class="hljs-keyword">this</span>);
      <span class="hljs-keyword">this</span>.sin_p0 = <span class="hljs-built_in">Math</span>.sin(p0);
      <span class="hljs-keyword">this</span>.cos_p0 = <span class="hljs-built_in">Math</span>.cos(p0);
      <span class="hljs-keyword">this</span>.sin_p1 = <span class="hljs-built_in">Math</span>.sin(p1);
      <span class="hljs-keyword">this</span>.cos_p1 = <span class="hljs-built_in">Math</span>.cos(p1);
      <span class="hljs-keyword">this</span>.is_long = (p1 - p0) &gt; <span class="hljs-built_in">Math</span>.PI ? <span class="hljs-number">1</span> : <span class="hljs-number">0</span>;
      <span class="hljs-keyword">this</span>.path = <span class="hljs-keyword">this</span>.calcSegment(<span class="hljs-keyword">this</span>.inner + <span class="hljs-number">3</span>, <span class="hljs-keyword">this</span>.inner + <span class="hljs-keyword">this</span>.outer - <span class="hljs-number">5</span>);
      <span class="hljs-keyword">this</span>.selectedPath = <span class="hljs-keyword">this</span>.calcSegment(<span class="hljs-keyword">this</span>.inner + <span class="hljs-number">3</span>, <span class="hljs-keyword">this</span>.inner + <span class="hljs-keyword">this</span>.outer);
      <span class="hljs-keyword">this</span>.hilight = <span class="hljs-keyword">this</span>.calcArc(<span class="hljs-keyword">this</span>.inner);
    }

    DonutSegment.prototype.calcArcPoints = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(r)</span> {</span>
      <span class="hljs-keyword">return</span> [<span class="hljs-keyword">this</span>.cx + r * <span class="hljs-keyword">this</span>.sin_p0, <span class="hljs-keyword">this</span>.cy + r * <span class="hljs-keyword">this</span>.cos_p0, <span class="hljs-keyword">this</span>.cx + r * <span class="hljs-keyword">this</span>.sin_p1, <span class="hljs-keyword">this</span>.cy + r * <span class="hljs-keyword">this</span>.cos_p1];
    };

    DonutSegment.prototype.calcSegment = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(r1, r2)</span> {</span>
      <span class="hljs-keyword">var</span> ix0, ix1, iy0, iy1, ox0, ox1, oy0, oy1, _ref, _ref1;
      _ref = <span class="hljs-keyword">this</span>.calcArcPoints(r1), ix0 = _ref[<span class="hljs-number">0</span>], iy0 = _ref[<span class="hljs-number">1</span>], ix1 = _ref[<span class="hljs-number">2</span>], iy1 = _ref[<span class="hljs-number">3</span>];
      _ref1 = <span class="hljs-keyword">this</span>.calcArcPoints(r2), ox0 = _ref1[<span class="hljs-number">0</span>], oy0 = _ref1[<span class="hljs-number">1</span>], ox1 = _ref1[<span class="hljs-number">2</span>], oy1 = _ref1[<span class="hljs-number">3</span>];
      <span class="hljs-keyword">return</span> (<span class="hljs-string">"M"</span> + ix0 + <span class="hljs-string">","</span> + iy0) + (<span class="hljs-string">"A"</span> + r1 + <span class="hljs-string">","</span> + r1 + <span class="hljs-string">",0,"</span> + <span class="hljs-keyword">this</span>.is_long + <span class="hljs-string">",0,"</span> + ix1 + <span class="hljs-string">","</span> + iy1) + (<span class="hljs-string">"L"</span> + ox1 + <span class="hljs-string">","</span> + oy1) + (<span class="hljs-string">"A"</span> + r2 + <span class="hljs-string">","</span> + r2 + <span class="hljs-string">",0,"</span> + <span class="hljs-keyword">this</span>.is_long + <span class="hljs-string">",1,"</span> + ox0 + <span class="hljs-string">","</span> + oy0) + <span class="hljs-string">"Z"</span>;
    };

    DonutSegment.prototype.calcArc = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(r)</span> {</span>
      <span class="hljs-keyword">var</span> ix0, ix1, iy0, iy1, _ref;
      _ref = <span class="hljs-keyword">this</span>.calcArcPoints(r), ix0 = _ref[<span class="hljs-number">0</span>], iy0 = _ref[<span class="hljs-number">1</span>], ix1 = _ref[<span class="hljs-number">2</span>], iy1 = _ref[<span class="hljs-number">3</span>];
      <span class="hljs-keyword">return</span> (<span class="hljs-string">"M"</span> + ix0 + <span class="hljs-string">","</span> + iy0) + (<span class="hljs-string">"A"</span> + r + <span class="hljs-string">","</span> + r + <span class="hljs-string">",0,"</span> + <span class="hljs-keyword">this</span>.is_long + <span class="hljs-string">",0,"</span> + ix1 + <span class="hljs-string">","</span> + iy1);
    };

    DonutSegment.prototype.render = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
      <span class="hljs-keyword">var</span> _this = <span class="hljs-keyword">this</span>;
      <span class="hljs-keyword">this</span>.arc = <span class="hljs-keyword">this</span>.drawDonutArc(<span class="hljs-keyword">this</span>.hilight, <span class="hljs-keyword">this</span>.color);
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.seg = <span class="hljs-keyword">this</span>.drawDonutSegment(<span class="hljs-keyword">this</span>.path, <span class="hljs-keyword">this</span>.color, <span class="hljs-keyword">this</span>.backgroundColor, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
        <span class="hljs-keyword">return</span> _this.fire(<span class="hljs-string">'hover'</span>, _this.index);
      }, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
        <span class="hljs-keyword">return</span> _this.fire(<span class="hljs-string">'click'</span>, _this.index);
      });
    };

    DonutSegment.prototype.drawDonutArc = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(path, color)</span> {</span>
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.raphael.path(path).attr({
        stroke: color,
        <span class="hljs-string">'stroke-width'</span>: <span class="hljs-number">2</span>,
        opacity: <span class="hljs-number">0</span>
      });
    };

    DonutSegment.prototype.drawDonutSegment = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(path, fillColor, strokeColor, hoverFunction, clickFunction)</span> {</span>
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.raphael.path(path).attr({
        fill: fillColor,
        stroke: strokeColor,
        <span class="hljs-string">'stroke-width'</span>: <span class="hljs-number">3</span>
      }).hover(hoverFunction).click(clickFunction);
    };

    DonutSegment.prototype.select = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
      <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.selected) {
        <span class="hljs-keyword">this</span>.seg.animate({
          path: <span class="hljs-keyword">this</span>.selectedPath
        }, <span class="hljs-number">150</span>, <span class="hljs-string">'&lt;&gt;'</span>);
        <span class="hljs-keyword">this</span>.arc.animate({
          opacity: <span class="hljs-number">1</span>
        }, <span class="hljs-number">150</span>, <span class="hljs-string">'&lt;&gt;'</span>);
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.selected = <span class="hljs-literal">true</span>;
      }
    };

    DonutSegment.prototype.deselect = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.selected) {
        <span class="hljs-keyword">this</span>.seg.animate({
          path: <span class="hljs-keyword">this</span>.path
        }, <span class="hljs-number">150</span>, <span class="hljs-string">'&lt;&gt;'</span>);
        <span class="hljs-keyword">this</span>.arc.animate({
          opacity: <span class="hljs-number">0</span>
        }, <span class="hljs-number">150</span>, <span class="hljs-string">'&lt;&gt;'</span>);
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.selected = <span class="hljs-literal">false</span>;
      }
    };

    <span class="hljs-keyword">return</span> DonutSegment;

  })(Morris.EventEmitter);

}).call(<span class="hljs-keyword">this</span>);</div></div></div></div></body></html>