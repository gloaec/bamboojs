<!DOCTYPE html><html lang="en"><head><title>assets/scripts/vendor/bootstrap_contextmenu</title></head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0"><meta name="groc-relative-root" content="../../../"><meta name="groc-document-path" content="assets/scripts/vendor/bootstrap_contextmenu"><meta name="groc-project-path" content="assets/scripts/vendor/bootstrap_contextmenu.js"><link rel="stylesheet" type="text/css" media="all" href="../../../assets/style.css"><script type="text/javascript" src="../../../assets/behavior.js"></script><body><div id="meta"><div class="file-path">assets/scripts/vendor/bootstrap_contextmenu.js</div></div><div id="document"><div class="segment"><div class="code"><div class="wrapper"><span class="hljs-comment">/*!
 * Bootstrap Context Menu
 * Author: @sydcanem
 * https://github.com/sydcanem/bootstrap-contextmenu
 *
 * Inspired by Bootstrap's dropdown plugin.
 * Bootstrap (http://getbootstrap.com).
 *
 * Licensed under MIT
 * ========================================================= */</span>

;(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">($)</span> {</span>
<span class="hljs-pi">
	'use strict'</span>;</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><h1 id="contextmenu-class-definition">CONTEXTMENU CLASS DEFINITION</h1></div></div></div><div class="segment"><div class="code"><div class="wrapper">	<span class="hljs-keyword">var</span> toggle = <span class="hljs-string">'[data-toggle="context"]'</span>;

	<span class="hljs-keyword">var</span> ContextMenu = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(element, options)</span> {</span>
		<span class="hljs-keyword">this</span>.$element = $(element);

		<span class="hljs-keyword">this</span>.before = options.before || <span class="hljs-keyword">this</span>.before;
		<span class="hljs-keyword">this</span>.onItem = options.onItem || <span class="hljs-keyword">this</span>.onItem;
		<span class="hljs-keyword">this</span>.scopes = options.scopes || <span class="hljs-literal">null</span>;

		<span class="hljs-keyword">if</span> (options.target) {
			<span class="hljs-keyword">this</span>.$element.data(<span class="hljs-string">'target'</span>, options.target);
		}

		<span class="hljs-keyword">this</span>.listen();
	};

	ContextMenu.prototype = {

		constructor: ContextMenu
		,show: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span> {</span>

			<span class="hljs-keyword">var</span> $menu
				, evt
				, tp
				, items
				, relatedTarget = { relatedTarget: <span class="hljs-keyword">this</span>, target: e.currentTarget };

			<span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.isDisabled()) <span class="hljs-keyword">return</span>;

			<span class="hljs-keyword">this</span>.closemenu();

			<span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.before.call(<span class="hljs-keyword">this</span>,e,$(e.currentTarget))) <span class="hljs-keyword">return</span>;

			$menu = <span class="hljs-keyword">this</span>.getMenu();
			$menu.trigger(evt = $.Event(<span class="hljs-string">'show.bs.context'</span>, relatedTarget));

			tp = <span class="hljs-keyword">this</span>.getPosition(e, $menu);
			items = <span class="hljs-string">'li:not(.divider)'</span>;
			$menu.attr(<span class="hljs-string">'style'</span>, <span class="hljs-string">''</span>)
				.css(tp)
				.addClass(<span class="hljs-string">'open'</span>)
				.on(<span class="hljs-string">'click.context.data-api'</span>, items, $.proxy(<span class="hljs-keyword">this</span>.onItem, <span class="hljs-keyword">this</span>, $(e.currentTarget)))
				.trigger(<span class="hljs-string">'shown.bs.context'</span>, relatedTarget);</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Delegating the <code>closemenu</code> only on the currently opened menu.
This prevents other opened menus from closing.</p></div></div><div class="code"><div class="wrapper">			$(<span class="hljs-string">'html'</span>)
				.on(<span class="hljs-string">'click.context.data-api'</span>, $menu.selector, $.proxy(<span class="hljs-keyword">this</span>.closemenu, <span class="hljs-keyword">this</span>));

			<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
		}

		,closemenu: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span> {</span>
			<span class="hljs-keyword">var</span> $menu
				, evt
				, items
				, relatedTarget;

			$menu = <span class="hljs-keyword">this</span>.getMenu();

			<span class="hljs-keyword">if</span>(!$menu.hasClass(<span class="hljs-string">'open'</span>)) <span class="hljs-keyword">return</span>;

			relatedTarget = { relatedTarget: <span class="hljs-keyword">this</span> };
			$menu.trigger(evt = $.Event(<span class="hljs-string">'hide.bs.context'</span>, relatedTarget));

			items = <span class="hljs-string">'li:not(.divider)'</span>;
			$menu.removeClass(<span class="hljs-string">'open'</span>)
				.off(<span class="hljs-string">'click.context.data-api'</span>, items)
				.trigger(<span class="hljs-string">'hidden.bs.context'</span>, relatedTarget);

			$(<span class="hljs-string">'html'</span>)
				.off(<span class="hljs-string">'click.context.data-api'</span>, $menu.selector);</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Don&#39;t propagate click event so other currently
opened menus won&#39;t close.</p></div></div><div class="code"><div class="wrapper">			<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
		}

		,keydown: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span> {</span>
			<span class="hljs-keyword">if</span> (e.which == <span class="hljs-number">27</span>) <span class="hljs-keyword">this</span>.closemenu(e);
		}

		,before: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span> {</span>
			<span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
		}

		,onItem: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span> {</span>
			<span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
		}

		,listen: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
			<span class="hljs-keyword">this</span>.$element.on(<span class="hljs-string">'contextmenu.context.data-api'</span>, <span class="hljs-keyword">this</span>.scopes, $.proxy(<span class="hljs-keyword">this</span>.show, <span class="hljs-keyword">this</span>));
			$(<span class="hljs-string">'html'</span>).on(<span class="hljs-string">'click.context.data-api'</span>, $.proxy(<span class="hljs-keyword">this</span>.closemenu, <span class="hljs-keyword">this</span>));
			$(<span class="hljs-string">'html'</span>).on(<span class="hljs-string">'keydown.context.data-api'</span>, $.proxy(<span class="hljs-keyword">this</span>.keydown, <span class="hljs-keyword">this</span>));
		}

		,destroy: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
			<span class="hljs-keyword">this</span>.$element.off(<span class="hljs-string">'.context.data-api'</span>).removeData(<span class="hljs-string">'context'</span>);
			$(<span class="hljs-string">'html'</span>).off(<span class="hljs-string">'.context.data-api'</span>);
		}

		,isDisabled: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
			<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.$element.hasClass(<span class="hljs-string">'disabled'</span>) || 
					<span class="hljs-keyword">this</span>.$element.attr(<span class="hljs-string">'disabled'</span>);
		}

		,getMenu: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
			<span class="hljs-keyword">var</span> selector = <span class="hljs-keyword">this</span>.$element.data(<span class="hljs-string">'target'</span>)
				, $menu;

			<span class="hljs-keyword">if</span> (!selector) {
				selector = <span class="hljs-keyword">this</span>.$element.attr(<span class="hljs-string">'href'</span>);
				selector = selector &amp;&amp; selector.replace(<span class="hljs-regexp">/.*(?=#[^\s]*$)/</span>, <span class="hljs-string">''</span>); <span class="hljs-comment">//strip for ie7</span>
			}

			$menu = $(selector);

			<span class="hljs-keyword">return</span> $menu &amp;&amp; $menu.length ? $menu : <span class="hljs-keyword">this</span>.$element.find(selector);
		}

		,getPosition: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e, $menu)</span> {</span>
			<span class="hljs-keyword">var</span> mouseX = e.clientX
				, mouseY = e.clientY
				, boundsX = $(window).width()
				, boundsY = $(window).height()
				, menuWidth = $menu.find(<span class="hljs-string">'.dropdown-menu'</span>).outerWidth()
				, menuHeight = $menu.find(<span class="hljs-string">'.dropdown-menu'</span>).outerHeight()
				, tp = {<span class="hljs-string">"position"</span>:<span class="hljs-string">"absolute"</span>,<span class="hljs-string">"z-index"</span>:<span class="hljs-number">9999</span>}
				, Y, X, parentOffset;

			<span class="hljs-keyword">if</span> (mouseY + menuHeight &gt; boundsY) {
				Y = {<span class="hljs-string">"top"</span>: mouseY - menuHeight + $(window).scrollTop()};
			} <span class="hljs-keyword">else</span> {
				Y = {<span class="hljs-string">"top"</span>: mouseY + $(window).scrollTop()};
			}

			<span class="hljs-keyword">if</span> ((mouseX + menuWidth &gt; boundsX) &amp;&amp; ((mouseX - menuWidth) &gt; <span class="hljs-number">0</span>)) {
				X = {<span class="hljs-string">"left"</span>: mouseX - menuWidth + $(window).scrollLeft()};
			} <span class="hljs-keyword">else</span> {
				X = {<span class="hljs-string">"left"</span>: mouseX + $(window).scrollLeft()};
			}</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>If context-menu&#39;s parent is positioned using absolute or relative positioning,
the calculated mouse position will be incorrect.
Adjust the position of the menu by its offset parent position.</p></div></div><div class="code"><div class="wrapper">			parentOffset = $menu.offsetParent().offset();
			X.left = X.left - parentOffset.left;
			Y.top = Y.top - parentOffset.top;
 
			<span class="hljs-keyword">return</span> $.extend(tp, Y, X);
		}

	};</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><h1 id="context-menu-plugin-definition">CONTEXT MENU PLUGIN DEFINITION</h1></div></div></div><div class="segment"><div class="code"><div class="wrapper">	$.fn.contextmenu = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(option,e)</span> {</span>
		<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.each(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
			<span class="hljs-keyword">var</span> $<span class="hljs-keyword">this</span> = $(<span class="hljs-keyword">this</span>)
				, data = $<span class="hljs-keyword">this</span>.data(<span class="hljs-string">'context'</span>)
				, options = (<span class="hljs-keyword">typeof</span> option == <span class="hljs-string">'object'</span>) &amp;&amp; option;

			<span class="hljs-keyword">if</span> (!data) $<span class="hljs-keyword">this</span>.data(<span class="hljs-string">'context'</span>, (data = <span class="hljs-keyword">new</span> ContextMenu($<span class="hljs-keyword">this</span>, options)));
			<span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> option == <span class="hljs-string">'string'</span>) data[option].call(data, e);
		});
	};

	$.fn.contextmenu.Constructor = ContextMenu;</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><h1 id="apply-to-standard-context-menu-elements">APPLY TO STANDARD CONTEXT MENU ELEMENTS</h1></div></div></div><div class="segment"><div class="code"><div class="wrapper">	$(document)
	   .on(<span class="hljs-string">'contextmenu.context.data-api'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
			$(toggle).each(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
				<span class="hljs-keyword">var</span> data = $(<span class="hljs-keyword">this</span>).data(<span class="hljs-string">'context'</span>);
				<span class="hljs-keyword">if</span> (!data) <span class="hljs-keyword">return</span>;
				data.closemenu();
			});
		})
		.on(<span class="hljs-string">'contextmenu.context.data-api'</span>, toggle, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span> {</span>
			$(<span class="hljs-keyword">this</span>).contextmenu(<span class="hljs-string">'show'</span>, e);

			e.preventDefault();
			e.stopPropagation();
		});
		
}(jQuery));</div></div></div></div></body></html>